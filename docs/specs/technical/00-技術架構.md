# ğŸ—ï¸ æŠ€è¡“æ¶æ§‹ç¸½è¦½

> **æ–‡ä»¶ç·¨è™Ÿ**: DOC-SPEC-TECH-01  
> **æ–‡ä»¶åç¨±**: æŠ€è¡“æ¶æ§‹ç¸½è¦½  
> **ç‰ˆæœ¬**: v2.0  
> **æœ€å¾Œæ›´æ–°**: 2025-12-31  
> **ç‹€æ…‹**: Draft

---

## ğŸ“‘ ç›®éŒ„

1. [æ•´é«”æ¶æ§‹åœ–](#1-æ•´é«”æ¶æ§‹åœ–)
2. [åˆ†å±¤æ¶æ§‹è¨­è¨ˆ](#2-åˆ†å±¤æ¶æ§‹è¨­è¨ˆ)
3. [æŠ€è¡“é¸å‹](#3-æŠ€è¡“é¸å‹)
4. [éƒ¨ç½²æ¶æ§‹](#4-éƒ¨ç½²æ¶æ§‹)
5. [æ¨¡çµ„ä¾è³´é—œä¿‚](#5-æ¨¡çµ„ä¾è³´é—œä¿‚)

---

## 1. æ•´é«”æ¶æ§‹åœ–

### 1.1 ç³»çµ±å…¨æ™¯æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å‰ç«¯å±¤ (Frontend Layer)                     â”‚
â”‚         React / Vue.js / Angular / Mobile App               â”‚
â”‚                  (æœªä¾†å¯æ“´å±• Thymeleaf SSR)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†• HTTP/HTTPS + WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                APIç¶²é—œå±¤ (API Gateway) - å¯é¸                â”‚
â”‚           Spring Cloud Gateway / Nginx / Kong               â”‚
â”‚            (è² è¼‰å‡è¡¡ã€é™æµã€èªè­‰ã€è·¯ç”±)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Spring Boot æ‡‰ç”¨å±¤ (Application Layer)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Controller Layer (REST API + WebSocket)        â”‚       â”‚
â”‚  â”‚   - @RestController                              â”‚       â”‚
â”‚  â”‚   - @WebSocketHandler                            â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚  Service Layer (Business Logic)                 â”‚       â”‚
â”‚  â”‚   - @Service                                     â”‚       â”‚
â”‚  â”‚   - @Transactional                               â”‚       â”‚
â”‚  â”‚   - å”èª¿ Repository + Mapper                     â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚  Repository Layer (Data Access)                 â”‚       â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚       â”‚
â”‚  â”‚   â”‚ JPA Repository  â”‚ MyBatis Mapper  â”‚         â”‚       â”‚
â”‚  â”‚   â”‚ - ç°¡å–® CRUD     â”‚ - è¤‡é›œæŸ¥è©¢      â”‚         â”‚       â”‚
â”‚  â”‚   â”‚ - å¯¦é«”é—œè¯      â”‚ - å‹•æ…‹ SQL      â”‚         â”‚       â”‚
â”‚  â”‚   â”‚ - åŸºç¤æŸ¥è©¢      â”‚ - æ‰¹æ¬¡æ“ä½œ      â”‚         â”‚       â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†•                    â†•                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL 15+â”‚   â”‚   Redis 7.0   â”‚   â”‚  InfluxDB     â”‚
â”‚ (ä¸»è³‡æ–™åº«)     â”‚   â”‚   (å¿«å–)       â”‚   â”‚  (æ™‚åºè³‡æ–™)    â”‚
â”‚ - è‚¡ç¥¨è³‡æ–™     â”‚   â”‚  - ç†±è³‡æ–™      â”‚   â”‚  (å¯é¸)       â”‚
â”‚ - è²¡å ±è³‡æ–™     â”‚   â”‚  - Session    â”‚   â”‚               â”‚
â”‚ - ä¿¡è™Ÿè³‡æ–™     â”‚   â”‚  - Rate Limit â”‚   â”‚               â”‚
â”‚ - JSONBæ”¯æ´    â”‚   â”‚  - å»é‡å¿«å–    â”‚   â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å¤–éƒ¨æœå‹™å±¤ (External Services)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Yahoo Finance   â”‚  â”‚ å°ç£è­‰äº¤æ‰€ API   â”‚  â”‚ FinMind   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ LINE Notify     â”‚  â”‚ SMTP Email      â”‚  â”‚ Telegram  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. åˆ†å±¤æ¶æ§‹è¨­è¨ˆ

### 2.1 å››å±¤æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Presentation Layer (è¡¨ç¾å±¤)               â”‚
â”‚     - Controller: è™•ç† HTTP è«‹æ±‚              â”‚
â”‚     - WebSocket Handler: WebSocket é€£ç·š       â”‚
â”‚     - DTO: è³‡æ–™å‚³è¼¸ç‰©ä»¶                        â”‚
â”‚     - Exception Handler: å…¨å±€ç•°å¸¸è™•ç†          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Application Layer (æ‡‰ç”¨å±¤)                â”‚
â”‚     - Service: æ¥­å‹™é‚è¼¯å¯¦ä½œ                    â”‚
â”‚     - Facade: é–€é¢æœå‹™ï¼ˆæ•´åˆå¤šå€‹ Serviceï¼‰     â”‚
â”‚     - Scheduler: å®šæ™‚ä»»å‹™                      â”‚
â”‚     - Event Handler: äº‹ä»¶è™•ç†                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Domain Layer (é ˜åŸŸå±¤)                     â”‚
â”‚     - Entity: å¯¦é«”ç‰©ä»¶ï¼ˆå°æ‡‰è³‡æ–™è¡¨ï¼‰           â”‚
â”‚     - Repository Interface: è³‡æ–™å­˜å–æ¥å£       â”‚
â”‚     - Domain Service: é ˜åŸŸæœå‹™                 â”‚
â”‚     - Value Object: å€¼ç‰©ä»¶                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Infrastructure Layer (åŸºç¤è¨­æ–½å±¤)         â”‚
â”‚     - Repository Implementation: è³‡æ–™å­˜å–å¯¦ä½œ  â”‚
â”‚     - External API Client: å¤–éƒ¨ API æ•´åˆ      â”‚
â”‚     - Cache Service: å¿«å–æœå‹™                  â”‚
â”‚     - Configuration: ç³»çµ±é…ç½®                  â”‚
â”‚     - Utils: å·¥å…·é¡åˆ¥                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.2 å„å±¤è·è²¬è©³è§£

#### 2.2.1 Controller Layer (è¡¨ç¾å±¤)

**è·è²¬**:
- âœ… æ¥æ”¶ HTTP è«‹æ±‚
- âœ… åƒæ•¸é©—è­‰èˆ‡è½‰æ›
- âœ… å‘¼å« Service å±¤è™•ç†æ¥­å‹™é‚è¼¯
- âœ… å›å‚³çµ±ä¸€æ ¼å¼çš„ Response

**âŒ ä¸æ‡‰è©²åšçš„äº‹**:
- ç›´æ¥æ“ä½œè³‡æ–™åº«
- åŒ…å«è¤‡é›œçš„æ¥­å‹™é‚è¼¯
- è™•ç†ç•°å¸¸ï¼ˆæ‡‰ç”±å…¨å±€ç•°å¸¸è™•ç†å™¨çµ±ä¸€è™•ç†ï¼‰

**ç¯„ä¾‹**:
```java
@RestController
@RequestMapping("/api/v1/stocks")
@RequiredArgsConstructor
public class StockController {
    
    private final StockService stockService;
    
    @GetMapping("/{stockId}")
    public ResponseEntity<ApiResponse<StockDTO>> getStock(
            @PathVariable String stockId) {
        
        StockDTO stock = stockService.getStockById(stockId);
        return ResponseEntity.ok(ApiResponse.success(stock));
    }
}
```

---

#### 2.2.2 Service Layer (æ¥­å‹™é‚è¼¯å±¤)

**è·è²¬**:
- âœ… å¯¦ä½œæ ¸å¿ƒæ¥­å‹™é‚è¼¯
- âœ… å”èª¿å¤šå€‹ Repository
- âœ… è™•ç†äº‹å‹™é‚Šç•Œ (@Transactional)
- âœ… å‘¼å«å¤–éƒ¨æœå‹™

**ç‰¹é»**:
- **å¯é‡ç”¨**: è¢« Controllerã€Schedulerã€Event Handler å‘¼å«
- **ç„¡ç‹€æ…‹**: ä¸æ‡‰ä¿å­˜è«‹æ±‚ç›¸é—œçš„ç‹€æ…‹

**ç¯„ä¾‹**:
```java
@Service
@RequiredArgsConstructor
@Transactional
public class SignalService {
    
    private final SignalRepository signalRepository;
    private final SignalMapper signalMapper;
    private final NotificationService notificationService;
    
    public Signal generateSignal(String stockId, SignalType type) {
        // 1. æ¥­å‹™é‚è¼¯è™•ç†
        Signal signal = createSignal(stockId, type);
        
        // 2. å„²å­˜åˆ°è³‡æ–™åº«
        Signal savedSignal = signalRepository.save(signal);
        
        // 3. ç™¼é€é€šçŸ¥
        notificationService.notifyNewSignal(savedSignal);
        
        return savedSignal;
    }
}
```

---

#### 2.2.3 Repository Layer (è³‡æ–™å­˜å–å±¤)

**JPA Repository ä½¿ç”¨å ´æ™¯**:
```java
public interface StockRepository extends JpaRepository<Stock, Long> {
    
    // ç°¡å–®æŸ¥è©¢ï¼šä½¿ç”¨æ–¹æ³•å‘½åè¦ç¯„
    Optional<Stock> findByStockId(String stockId);
    
    List<Stock> findByIndustryAndIsActive(String industry, Boolean isActive);
    
    // ä½¿ç”¨ @Query å®šç¾©è¤‡é›œæŸ¥è©¢
    @Query("SELECT s FROM Stock s WHERE s.marketCap > :minCap")
    List<Stock> findHighCapStocks(@Param("minCap") BigDecimal minCap);
}
```

**MyBatis Mapper ä½¿ç”¨å ´æ™¯**:
```java
@Mapper
public interface SignalMapper {
    
    // è¤‡é›œçš„å¤šè¡¨ JOIN æŸ¥è©¢
    List<SignalDTO> findSignalsWithDetails(@Param("params") SignalQueryParams params);
    
    // å‹•æ…‹ SQL æŸ¥è©¢
    List<Signal> searchSignals(@Param("criteria") SignalSearchCriteria criteria);
    
    // æ‰¹æ¬¡æ’å…¥
    int batchInsertSignals(@Param("signals") List<Signal> signals);
}
```

---

#### 2.2.4 Entity Layer (å¯¦é«”å±¤)

**è·è²¬**:
- å°æ‡‰è³‡æ–™åº«è¡¨çµæ§‹
- å®šç¾©æ¬„ä½èˆ‡é—œè¯é—œä¿‚
- åŒ…å«å¿…è¦çš„é©—è­‰è¨»è§£

**ç¯„ä¾‹**:
```java
@Entity
@Table(name = "stocks")
@Data
public class Stock {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = "stock_id", unique = true, nullable = false, length = 10)
    private String stockId;
    
    @Column(name = "stock_name", nullable = false, length = 50)
    private String stockName;
    
    @Column(name = "industry", length = 50)
    private String industry;
    
    @Column(name = "is_active")
    private Boolean isActive = true;
    
    // é—œè¯é—œä¿‚
    @OneToMany(mappedBy = "stock", cascade = CascadeType.ALL)
    private List<StockPrice> prices;
}
```

---

#### 2.2.5 DTO Layer (è³‡æ–™å‚³è¼¸å±¤)

**è·è²¬**:
- API è«‹æ±‚/å›æ‡‰çš„è³‡æ–™çµæ§‹
- èˆ‡ Entity åˆ†é›¢ï¼Œé¿å…ç›´æ¥æš´éœ²è³‡æ–™åº«çµæ§‹
- å¯åŒ…å«æ ¼å¼åŒ–é‚è¼¯

**ç¯„ä¾‹**:
```java
@Data
public class StockDTO {
    private String stockId;
    private String stockName;
    private String industry;
    private BigDecimal currentPrice;
    private BigDecimal priceChange;
    private BigDecimal priceChangePercent;
    private LocalDate lastUpdated;
}
```

---

## 3. æŠ€è¡“é¸å‹

### 3.1 å®Œæ•´æŠ€è¡“æ£§

| å±¤æ¬¡ | æŠ€è¡“ | ç‰ˆæœ¬ | èªªæ˜ |
|-----|------|------|------|
| **æ ¸å¿ƒæ¡†æ¶** | Spring Boot | 3.2+ | ä¼æ¥­ç´š Java æ¡†æ¶ |
| **Java ç‰ˆæœ¬** | Java | 17 LTS | é•·æœŸæ”¯æ´ç‰ˆæœ¬ |
| **Web æ¡†æ¶** | Spring MVC | 6.x | RESTful API |
| **æŒä¹…å±¤æ¡†æ¶** | Spring Data JPA | 3.x | ç°¡å–® CRUDï¼Œå¯¦é«”é—œè¯ |
| **æŒä¹…å±¤æ¡†æ¶** | MyBatis | 3.5+ | è¤‡é›œæŸ¥è©¢ï¼Œå‹•æ…‹ SQL |
| **MyBatis æ•´åˆ** | mybatis-spring-boot-starter | 3.0+ | MyBatis + Spring Boot æ•´åˆ |
| **è³‡æ–™åº«** | PostgreSQL | 15+ | é—œè¯å¼è³‡æ–™åº«ï¼Œæ”¯æ´ JSONB |
| **PostgreSQL é©…å‹•** | postgresql | 42.7+ | JDBC Driver |
| **JSONB æ”¯æ´** | hypersistence-utils | 3.7+ | Hibernate JSONB æ˜ å°„ |
| **å¿«å–** | Redis | 7.0+ | åˆ†æ•£å¼å¿«å– |
| **æ™‚åºè³‡æ–™åº«** | InfluxDB | 2.x (å¯é¸) | æ™‚åºè³‡æ–™å­˜å„²ï¼ˆè‚¡åƒ¹æ­·å²ã€æŒ‡æ¨™æ™‚åºï¼‰ |
| **å®‰å…¨æ¡†æ¶** | Spring Security | 6.x | å®‰å…¨èªè­‰æˆæ¬Š |
| **JWT** | JJWT | 0.12+ | Token ç”Ÿæˆèˆ‡é©—è­‰ |
| **WebSocket** | Spring WebSocket | 6.x | å³æ™‚é€šè¨Š |
| **API æ–‡æª”** | SpringDoc OpenAPI | 2.3+ | Swagger UI 3.0 |
| **HTTP å®¢æˆ¶ç«¯** | WebClient | 6.x | éé˜»å¡ HTTP å®¢æˆ¶ç«¯ï¼ˆå‘¼å«å¤–éƒ¨ APIï¼‰ |
| **JSON è™•ç†** | Jackson | 2.15+ | JSON åºåˆ—åŒ–/ååºåˆ—åŒ– |
| **æ—¥èªŒæ¡†æ¶** | SLF4J + Logback | 2.0+ | æ—¥èªŒè¨˜éŒ„ |
| **æ¸¬è©¦æ¡†æ¶** | JUnit 5 + Mockito | 5.10+ | å–®å…ƒæ¸¬è©¦ |
| **å»ºç½®å·¥å…·** | Maven | 3.9+ | ä¾è³´ç®¡ç†èˆ‡å°ˆæ¡ˆå»ºç½® |
| **ç›£æ§** | Spring Actuator | 3.x | æ‡‰ç”¨å¥åº·æª¢æŸ¥èˆ‡ç›£æ§ |
| **æŒ‡æ¨™æ”¶é›†** | Micrometer | 1.12+ | æŒ‡æ¨™æ”¶é›†èˆ‡åŒ¯å‡º |
| **æ’ç¨‹** | Spring Scheduler | 3.x | å®šæ™‚ä»»å‹™ |
| **é©—è­‰æ¡†æ¶** | Hibernate Validator | 8.x | Bean Validation (JSR 380) |

---

### 3.2 æŠ€è¡“é¸å‹å°æ¯”èˆ‡æ±ºç­–

| åŠŸèƒ½éœ€æ±‚ | æ–¹æ¡ˆA | æ–¹æ¡ˆB | æœ€çµ‚é¸æ“‡ | é¸æ“‡ç†ç”± |
|---------|-------|-------|---------|---------|
| **è³‡æ–™åº«** | MySQL | PostgreSQL | âœ… **PostgreSQL** | â€¢ JSONB æ”¯æ´æ›´å¥½<br>â€¢ å…¨æ–‡æª¢ç´¢åŠŸèƒ½å¼·å¤§<br>â€¢ åŸç”Ÿé™£åˆ—å‹æ…‹<br>â€¢ æ›´å¥½çš„è³‡æ–™å®Œæ•´æ€§ |
| **æŒä¹…å±¤** | ç´” JPA | ç´” MyBatis | âœ… **JPA + MyBatis** | â€¢ JPA: ç°¡å–® CRUDï¼Œé–‹ç™¼æ•ˆç‡é«˜<br>â€¢ MyBatis: è¤‡é›œæŸ¥è©¢ï¼ŒSQL å¯æ§æ€§å¼·<br>â€¢ å…¼é¡§æ•ˆç‡èˆ‡éˆæ´»æ€§ |
| **å¿«å–** | Guava Cache | Redis | âœ… **Redis** | â€¢ åˆ†æ•£å¼å¿«å–ï¼Œæ”¯æ´å¤šå¯¦ä¾‹å…±äº«<br>â€¢ è±å¯Œçš„è³‡æ–™çµæ§‹<br>â€¢ å¯ç”¨æ–¼ Sessionã€é™æµã€å»é‡ |
| **æ™‚åºè³‡æ–™** | PostgreSQL | InfluxDB | âœ… **PostgreSQLï¼ˆä¸»ï¼‰+ InfluxDBï¼ˆå¯é¸ï¼‰** | â€¢ PostgreSQL æ»¿è¶³åŸºæœ¬éœ€æ±‚<br>â€¢ InfluxDB ç”¨æ–¼é«˜é »æ™‚åºè³‡æ–™ï¼ˆæœªä¾†æ“´å……ï¼‰ |
| **API æ–‡æª”** | Swagger 2 | SpringDoc OpenAPI 3 | âœ… **SpringDoc** | â€¢ OpenAPI 3.0 æ¨™æº–ï¼Œæ›´ç¾ä»£åŒ–<br>â€¢ èˆ‡ Spring Boot 3 æ•´åˆæ›´å¥½ |
| **HTTP å®¢æˆ¶ç«¯** | RestTemplate | WebClient | âœ… **WebClient** | â€¢ éé˜»å¡ï¼Œæ•ˆèƒ½æ›´å¥½<br>â€¢ æ”¯æ´éŸ¿æ‡‰å¼ç·¨ç¨‹<br>â€¢ æ›´é©åˆå‘¼å«å¤–éƒ¨ API |
| **å®šæ™‚ä»»å‹™** | Quartz | Spring Scheduler | âœ… **Spring Scheduler** | â€¢ ç°¡å–®éœ€æ±‚ç”¨åŸç”Ÿå³å¯<br>â€¢ æ¸›å°‘ä¾è³´è¤‡é›œåº¦<br>â€¢ æœªä¾†å¯å‡ç´šè‡³ Quartz |

---

### 3.3 JPA vs MyBatis ä½¿ç”¨æŒ‡å—

#### âœ… ä½¿ç”¨ JPA çš„å ´æ™¯

```java
// 1. ç°¡å–®çš„ CRUD æ“ä½œ
stockRepository.findById(id);
stockRepository.save(stock);
stockRepository.deleteById(id);

// 2. ç°¡å–®çš„æŸ¥è©¢æ¢ä»¶
stockRepository.findByStockId("2330");
stockRepository.findByIndustryAndIsActive("åŠå°é«”", true);

// 3. åˆ†é æŸ¥è©¢
Pageable pageable = PageRequest.of(0, 20);
Page<Stock> stocks = stockRepository.findAll(pageable);

// 4. å¯¦é«”é—œè¯æŸ¥è©¢ï¼ˆä¸€å°å¤šã€å¤šå°å¤šï¼‰
@OneToMany(mappedBy = "stock")
private List<StockPrice> prices;
```

#### âœ… ä½¿ç”¨ MyBatis çš„å ´æ™¯

```xml
<!-- 1. è¤‡é›œçš„å¤šè¡¨ JOIN æŸ¥è©¢ -->
<select id="findSignalsWithDetails" resultType="SignalDTO">
    SELECT 
        s.signal_id,
        s.stock_id,
        st.stock_name,
        s.signal_type,
        s.signal_strength,
        ti.ma5,
        ti.rsi
    FROM signals s
    LEFT JOIN stocks st ON s.stock_id = st.stock_id
    LEFT JOIN technical_indicators ti ON s.stock_id = ti.stock_id
    WHERE s.signal_status = 'ACTIVE'
      AND s.signal_date = #{date}
</select>

<!-- 2. å‹•æ…‹ SQL -->
<select id="searchSignals" resultType="Signal">
    SELECT * FROM signals
    <where>
        <if test="stockId != null">
            AND stock_id = #{stockId}
        </if>
        <if test="signalType != null">
            AND signal_type = #{signalType}
        </if>
        <if test="startDate != null">
            AND signal_date >= #{startDate}
        </if>
    </where>
</select>

<!-- 3. æ‰¹æ¬¡æ“ä½œ -->
<insert id="batchInsertSignals">
    INSERT INTO signals (stock_id, signal_type, signal_strength)
    VALUES
    <foreach collection="signals" item="signal" separator=",">
        (#{signal.stockId}, #{signal.signalType}, #{signal.signalStrength})
    </foreach>
</insert>

<!-- 4. è¤‡é›œçš„èšåˆçµ±è¨ˆ -->
<select id="getSignalStatistics" resultType="SignalStatDTO">
    SELECT 
        stock_id,
        COUNT(*) as signal_count,
        AVG(signal_strength) as avg_strength,
        MAX(signal_date) as last_signal_date
    FROM signals
    WHERE signal_date >= #{startDate}
    GROUP BY stock_id
    HAVING COUNT(*) > 5
    ORDER BY avg_strength DESC
</select>
```

---

## 4. éƒ¨ç½²æ¶æ§‹

### 4.1 é–‹ç™¼ç’°å¢ƒ

```
æœ¬æ©Ÿæˆ– Docker Compose
â”œâ”€â”€ Spring Boot Application (Port: 8080)
â”œâ”€â”€ PostgreSQL (Port: 5432)
â””â”€â”€ Redis (Port: 6379)

é–‹ç™¼å·¥å…·:
â”œâ”€â”€ IDE: IntelliJ IDEA / Eclipse
â”œâ”€â”€ è³‡æ–™åº«ç®¡ç†: DBeaver / pgAdmin
â””â”€â”€ API æ¸¬è©¦: Postman / Insomnia
```

**å•Ÿå‹•æ–¹å¼**:
```bash
# ä½¿ç”¨ Docker Compose å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ
docker-compose -f docker-compose-dev.yml up -d

# å•Ÿå‹• Spring Boot æ‡‰ç”¨
mvn spring-boot:run
```

---

### 4.2 æ¸¬è©¦ç’°å¢ƒ

```
Docker Compose å¤šå®¹å™¨ç·¨æ’
â”œâ”€â”€ Application Container Ã— 1
â”œâ”€â”€ PostgreSQL Container
â”œâ”€â”€ Redis Container
â””â”€â”€ Mock Server (æ¨¡æ“¬å¤–éƒ¨ API)

ç‰¹æ€§:
â”œâ”€â”€ ç¨ç«‹çš„è³‡æ–™åº«å¯¦ä¾‹
â”œâ”€â”€ æ¨¡æ“¬å¤–éƒ¨ APIï¼ˆé¿å…ä¾è³´çœŸå¯¦å¤–éƒ¨æœå‹™ï¼‰
â””â”€â”€ è‡ªå‹•åŒ–æ¸¬è©¦æµç¨‹
```

---

### 4.3 ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²é¸é …

#### é¸é … 1: å–®æ©Ÿéƒ¨ç½²ï¼ˆå°è¦æ¨¡ï¼‰

**é©ç”¨å ´æ™¯**: å€‹äººé …ç›®ã€å°å‹åœ˜éšŠã€åˆæœŸ MVP

```
å–®ä¸€ä¼ºæœå™¨
â”œâ”€â”€ Application Server (Docker Container)
â”‚   â””â”€â”€ Spring Boot Application
â”œâ”€â”€ PostgreSQL Server
â””â”€â”€ Redis Server

å„ªé»:
â”œâ”€â”€ éƒ¨ç½²ç°¡å–®
â”œâ”€â”€ æˆæœ¬ä½
â””â”€â”€ ç¶­è­·å®¹æ˜“

ç¼ºé»:
â””â”€â”€ ç„¡æ³•æ°´å¹³æ“´å±•
```

---

#### é¸é … 2: åˆ†æ•£å¼éƒ¨ç½²ï¼ˆä¸­è¦æ¨¡ï¼‰

**é©ç”¨å ´æ™¯**: ä¸­å‹ä¼æ¥­ã€æµé‡å¢é•·éšæ®µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Load Balancer     â”‚  â† Nginx / HAProxy
â”‚      (Nginx)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“              â†“          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  App 1  â”‚  â”‚  App 2  â”‚  â”‚  App N  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“              â†“          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PostgreSQLâ”‚  â”‚  Redis  â”‚  â”‚ InfluxDBâ”‚
â”‚ Master  â”‚  â”‚ Cluster â”‚  â”‚(Optional)â”‚
â”‚   â†“     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Slave 1 â”‚
â”‚ Slave 2 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å„ªé»:
â”œâ”€â”€ å¯æ°´å¹³æ“´å±•
â”œâ”€â”€ é«˜å¯ç”¨æ€§ï¼ˆMaster-Slaveï¼‰
â””â”€â”€ è² è¼‰å‡è¡¡

ç¼ºé»:
â”œâ”€â”€ æ¶æ§‹è¤‡é›œåº¦å¢åŠ 
â””â”€â”€ æˆæœ¬è¼ƒé«˜
```

---

#### é¸é … 3: Kubernetes éƒ¨ç½²ï¼ˆå¤§è¦æ¨¡ï¼‰

**é©ç”¨å ´æ™¯**: å¤§å‹ä¼æ¥­ã€é«˜æµé‡ã€éœ€è¦è‡ªå‹•æ“´å±•

```
Kubernetes Cluster
â”œâ”€â”€ Ingress Controller (æµé‡å…¥å£)
â”‚
â”œâ”€â”€ Application Pods (Auto-scaling)
â”‚   â”œâ”€â”€ Pod 1: Stock Monitor App
â”‚   â”œâ”€â”€ Pod 2: Stock Monitor App
â”‚   â””â”€â”€ Pod N: Stock Monitor App (ä¾æµé‡è‡ªå‹•æ“´å±•)
â”‚
â”œâ”€â”€ PostgreSQL StatefulSet
â”‚   â”œâ”€â”€ Master Pod
â”‚   â””â”€â”€ Slave Pods
â”‚
â”œâ”€â”€ Redis Deployment
â”‚   â””â”€â”€ Redis Cluster
â”‚
â””â”€â”€ Monitoring Stack
    â”œâ”€â”€ Prometheus (æŒ‡æ¨™æ”¶é›†)
    â”œâ”€â”€ Grafana (è¦–è¦ºåŒ–)
    â””â”€â”€ ELK Stack (æ—¥èªŒåˆ†æ)

å„ªé»:
â”œâ”€â”€ è‡ªå‹•æ“´å±• (Auto-scaling)
â”œâ”€â”€ è‡ªå‹•æ¢å¾© (Self-healing)
â”œâ”€â”€ æ»¾å‹•æ›´æ–° (Rolling Update)
â”œâ”€â”€ è³‡æºèª¿åº¦å„ªåŒ–
â””â”€â”€ å®¹å™¨ç·¨æ’è‡ªå‹•åŒ–

ç¼ºé»:
â”œâ”€â”€ å­¸ç¿’æ›²ç·šé™¡å³­
â”œâ”€â”€ æ¶æ§‹è¤‡é›œåº¦é«˜
â””â”€â”€ éœ€è¦å°ˆæ¥­ DevOps åœ˜éšŠ
```

---

## 5. æ¨¡çµ„ä¾è³´é—œä¿‚

### 5.1 æ¨¡çµ„æ¸…å–®

| æ¨¡çµ„ç·¨è™Ÿ | æ¨¡çµ„åç¨± | è·è²¬èªªæ˜ | æŒä¹…å±¤é¸æ“‡ | ä¾è³´æ¨¡çµ„ |
|---------|---------|---------|----------|---------|
| **M06** | è³‡æ–™ç®¡ç†æ¨¡çµ„ | è³‡æ–™ç²å–ã€æ¸…æ´—ã€å„²å­˜ã€æ›´æ–°æ’ç¨‹ | JPA (ä¸») + MyBatis (æ‰¹æ¬¡) | ç„¡ |
| **M07** | æŠ€è¡“åˆ†ææ¨¡çµ„ | è¨ˆç®— 71 å€‹æŠ€è¡“æŒ‡æ¨™ | JPA + MyBatis | M06 |
| **M08** | åŸºæœ¬é¢åˆ†ææ¨¡çµ„ | è¨ˆç®— 75 å€‹è²¡å‹™æŒ‡æ¨™ | MyBatis (ä¸») + JPA | M06 |
| **M09** | ç±Œç¢¼åˆ†ææ¨¡çµ„ | åˆ†æä¸‰å¤§æ³•äººã€èè³‡èåˆ¸ | MyBatis | M06 |
| **M10** | æŠ€è¡“å‹æ…‹è¾¨è­˜æ¨¡çµ„ | è­˜åˆ¥ K ç·šã€åœ–è¡¨ã€è¶¨å‹¢å‹æ…‹ | JPA + MyBatis | M06, M07 |
| **M11** | é‡åŒ–ç­–ç•¥æ¨¡çµ„ | ç­–ç•¥æ¡†æ¶ã€ç­–ç•¥åº«ã€åƒæ•¸å„ªåŒ– | MyBatis | M06, M07, M08, M09 |
| **M12** | ç¸½ç¶“èˆ‡ç”¢æ¥­åˆ†ææ¨¡çµ„ | ç¸½ç¶“æŒ‡æ¨™ã€ç”¢æ¥­åˆ†é¡ã€ç”¢æ¥­è¼ªå‹• | JPA (ä¸») | M06, M08 |
| **M13** | ä¿¡è™Ÿåˆ¤æ–·å¼•æ“ | çµ±ä¸€ä¿¡è™Ÿç”Ÿæˆã€å»é‡ã€åˆä½µã€è©•åˆ† | JPA + MyBatis | M07, M08, M09, M10, M11, M12 |
| **M14** | é¸è‚¡å¼•æ“ | å¤šæ¢ä»¶ç¯©é¸ã€é è¨­ç­–ç•¥ã€æ’åºæ’å | MyBatis (ä¸») | M06, M07, M08, M09, M13 |
| **M15** | è­¦å ±é€šçŸ¥ç³»çµ± | è­¦å ±è¨­å®šã€å¤šé€šé“é€šçŸ¥ã€é »ç‡æ§åˆ¶ | JPA (ä¸») | M13 |
| **M16** | å›æ¸¬ç³»çµ± | ç­–ç•¥å›æ¸¬ã€ç¸¾æ•ˆè©•ä¼°ã€åƒæ•¸å„ªåŒ– | MyBatis | M06, M07, M11, M13 |
| **M17** | é¢¨éšªç®¡ç†æ¨¡çµ„ | åœæåœåˆ©ã€éƒ¨ä½ç®¡ç†ã€é¢¨éšªæŒ‡æ¨™ | JPA + MyBatis | M06, M07, M13 |
| **M18** | æŠ•è³‡çµ„åˆç®¡ç† | æŒè‚¡è¨˜éŒ„ã€æç›Šè¨ˆç®—ã€ç¸¾æ•ˆåˆ†æ | JPA + MyBatis | M06, M13, M17 |

---

### 5.2 æ¨¡çµ„ä¾è³´é—œä¿‚åœ–

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   M06   â”‚
                        â”‚è³‡æ–™ç®¡ç†  â”‚
                        â”‚JPA+MyBa â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â†“          â†“          â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   M07   â”‚ â”‚   M08   â”‚ â”‚   M09   â”‚
            â”‚æŠ€è¡“åˆ†æ  â”‚ â”‚åŸºæœ¬é¢    â”‚ â”‚ç±Œç¢¼åˆ†æ  â”‚
            â”‚JPA+MyBa â”‚ â”‚MyBatis  â”‚ â”‚MyBatis  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚          â”‚          â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â†“          â†“          â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   M10   â”‚ â”‚   M11   â”‚ â”‚   M12   â”‚
            â”‚å‹æ…‹è¾¨è­˜  â”‚ â”‚é‡åŒ–ç­–ç•¥  â”‚ â”‚ç¸½ç¶“ç”¢æ¥­  â”‚
            â”‚JPA+MyBa â”‚ â”‚MyBatis  â”‚ â”‚  JPA    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚          â”‚          â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚   M13   â”‚
                       â”‚ä¿¡è™Ÿå¼•æ“  â”‚
                       â”‚JPA+MyBa â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â†“          â†“          â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   M14   â”‚ â”‚   M15   â”‚ â”‚   M16   â”‚
            â”‚é¸è‚¡å¼•æ“  â”‚ â”‚è­¦å ±é€šçŸ¥  â”‚ â”‚å›æ¸¬ç³»çµ±  â”‚
            â”‚MyBatis  â”‚ â”‚  JPA    â”‚ â”‚MyBatis  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   M17      â”‚
                    â”‚é¢¨éšªç®¡ç†     â”‚
                    â”‚JPA+MyBatis â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   M18      â”‚
                    â”‚æŠ•è³‡çµ„åˆ     â”‚
                    â”‚JPA+MyBatis â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.3 æ¨¡çµ„åˆ†å±¤èªªæ˜

| å±¤ç´š | æ¨¡çµ„ | è·è²¬ | ç‰¹æ€§ |
|-----|------|------|------|
| **Layer 1<br>è³‡æ–™å±¤** | M06 | æä¾›ä¹¾æ·¨ã€æ­£ç¢ºçš„è³‡æ–™ | ç¨ç«‹ï¼Œç„¡ä¾è³´ |
| **Layer 2<br>åˆ†æå±¤** | M07, M08, M09 | åŸºæ–¼åŸå§‹è³‡æ–™é€²è¡Œåˆ†æèˆ‡æŒ‡æ¨™è¨ˆç®— | ä¾è³´ M06 |
| **Layer 3<br>é€²éšåˆ†æå±¤** | M10, M11, M12 | åŸºæ–¼ Layer 2 é€²è¡Œæ›´é«˜å±¤æ¬¡çš„åˆ¤æ–· | ä¾è³´ M06, M07, M08, M09 |
| **Layer 4<br>ä¿¡è™Ÿå±¤** | M13 | æ•´åˆæ‰€æœ‰åˆ†æçµæœï¼Œç”¢ç”Ÿçµ±ä¸€ä¿¡è™Ÿ | ä¾è³´ M07-M12 |
| **Layer 5<br>æ‡‰ç”¨å±¤** | M14, M15, M16 | åŸºæ–¼ä¿¡è™Ÿæä¾›å„é¡æ‡‰ç”¨åŠŸèƒ½ | ä¾è³´ M13 |
| **Layer 6<br>ç®¡ç†å±¤** | M17, M18 | è³‡é‡‘ç®¡ç†èˆ‡ç¸¾æ•ˆè¿½è¹¤ | ä¾è³´ M06, M13, M17 |

---

### 5.4 æ¨¡çµ„é–“é€šè¨Šæ–¹å¼

| é€šè¨Šæ–¹å¼ | ä½¿ç”¨å ´æ™¯ | ç¯„ä¾‹ | å„ªé» | ç¼ºé» |
|---------|---------|------|------|------|
| **ç›´æ¥å‘¼å«** | åŒæ­¥è™•ç†ï¼Œå¯¦æ™‚å›æ‡‰ | Controller â†’ Service â†’ Repository | ç°¡å–®ç›´æ¥ | å¼·è€¦åˆ |
| **äº‹ä»¶é©…å‹•** | éåŒæ­¥è™•ç†ï¼Œè§£è€¦æ¨¡çµ„ | ä¿¡è™Ÿç”¢ç”Ÿ â†’ ç™¼å¸ƒäº‹ä»¶ â†’ é€šçŸ¥ç³»çµ±ç›£è½ | è§£è€¦ï¼Œæ“´å±•æ€§å¥½ | è¤‡é›œåº¦è¼ƒé«˜ |
| **Job æ’ç¨‹** | æ‰¹æ¬¡è™•ç†ï¼Œå®šæ™‚åŸ·è¡Œ | æ¯æ—¥è³‡æ–™æ›´æ–°ã€æŒ‡æ¨™è¨ˆç®— | å¯æ§æ™‚é–“ | ä¸é©åˆå³æ™‚è™•ç† |
| **è¨Šæ¯ä½‡åˆ—** | é«˜ä½µç™¼ã€å¯é æ€§è¦æ±‚ | å¤§é‡é€šçŸ¥ç™¼é€ï¼ˆå¯é¸ï¼Œæœªä¾†æ“´å……ï¼‰ | é«˜å¯é æ€§ | å¢åŠ ç³»çµ±è¤‡é›œåº¦ |

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [å…¨ç³»çµ±å¥‘ç´„](00-å…¨ç³»çµ±å¥‘ç´„.md) â­ æ ¸å¿ƒå¥‘ç´„
- [é–‹ç™¼æº–å‰‡](00-é–‹ç™¼æº–å‰‡.md)
- [NFR éåŠŸèƒ½æ€§éœ€æ±‚](00-NFRéåŠŸèƒ½æ€§éœ€æ±‚.md)
- [è³‡æ–™åº«è¨­è¨ˆ](../../design/database-schema.md)

---

**æ–‡ä»¶ç¶­è­·è€…**: ç³»çµ±æ¶æ§‹å¸«  
**æœ€å¾Œæ›´æ–°**: 2025-12-31  
**ä¸‹æ¬¡å¯©æ ¸**: 2026-01-31
