# 模組開發文件更新指南

> **文件編號**: GUIDE-DEV-DOC
> **版本**: v1.0
> **最後更新**: 2026-01-15
> **狀態**: Active

---

## 1. 概述

當完成模組的某個優先級（P0/P1/P2）開發後，需要同步更新相關文件以保持文檔與程式碼一致。本指南提供標準化的更新流程與格式範本。

---

## 2. 需更新的文件清單

完成開發後，需更新以下 **4 個文件**：

| 序號 | 文件類型 | 路徑格式 | 說明 |
|------|---------|---------|------|
| 1 | 開發記錄 | `docs/design/{模組代號}-開發記錄.md` | **新建**（首次）或更新 |
| 2 | 測試準則 | `docs/design/{模組代號}-測試準則.md` | 新增測試場景 |
| 3 | 功能需求 | `docs/specs/functional/{模組代號}-XXX功能需求.md` | 新增實作進度 |
| 4 | API 規格 | `docs/specs/api/{模組代號}-API規格.md` | 新增輸出欄位定義 |

---

## 3. 更新指令模板

### 3.1 給 AI Agent 的標準指令

```
完成 {模組代號} 的 {優先級} 功能開發後，請更新以下 4 個文件：

1. **新建/更新開發記錄** `docs/design/{模組代號}-開發記錄.md`
   - 開發進度總覽表（P0/P1/P2 完成數量與百分比）
   - 各優先級的完成日期
   - 計算器/功能清單表格（類別、名稱、檔案路徑、狀態、備註）
   - 測試覆蓋清單（測試類別、檔案路徑、測試項目數）
   - 新增目錄結構圖
   - 待確認項目（TODO）清單
   - 下一階段待開發項目
   - 變更歷史

2. **更新測試準則** `docs/design/{模組代號}-測試準則.md`
   - 更新「最後更新」日期
   - 在單元測試章節後新增「{優先級} 計算器測試」子章節
   - 列出各類別的測試類別表格（測試類別、測試項目、驗證重點）
   - 提供代表性的測試場景範例（Given/When/Then 格式）

3. **更新功能需求** `docs/specs/functional/{模組代號}-XXX功能需求.md`
   - 更新「最後更新」日期
   - 在「依賴關係」章節後新增「實作進度」子章節
   - 包含進度總覽表（優先級、計畫數量、已完成、進度、狀態）
   - 列出各優先級已完成的計算器/功能清單
   - 添加開發記錄文件的參照連結

4. **更新 API 規格** `docs/specs/api/{模組代號}-API規格.md`
   - 更新「最後更新」日期
   - 在「錯誤碼定義」章節後新增「{優先級} 輸出欄位定義」子章節
   - 按類別列出輸出欄位表格（指標/功能、輸出欄位、類型、說明）
   - 包含信號欄位的可能值說明

參照範本：M07 模組的對應文件
```

### 3.2 實際使用範例

**M08 基本面分析模組**：
```
完成 M08 的 P1 功能開發後，請更新以下 4 個文件：

1. 新建 `docs/design/M08-開發記錄.md`
2. 更新 `docs/design/M08-測試準則.md`
3. 更新 `docs/specs/functional/M08-基本面分析功能需求.md`
4. 更新 `docs/specs/api/M08-API規格.md`

參照 M07 的文件格式
```

**M09 籌碼分析模組**：
```
完成 M09 的 P0 功能開發後，請更新以下 4 個文件：

1. 新建 `docs/design/M09-開發記錄.md`
2. 更新 `docs/design/M09-測試準則.md`
3. 更新 `docs/specs/functional/M09-籌碼分析功能需求.md`
4. 更新 `docs/specs/api/M09-API規格.md`

參照 M07 的文件格式
```

---

## 4. 各文件格式範本

### 4.1 開發記錄文件範本

```markdown
# {模組代號}-{模組名稱}開發記錄

> **文件編號**: DEV-{模組代號}
> **模組名稱**: {模組名稱}
> **版本**: v1.0
> **最後更新**: {日期}
> **狀態**: Active

---

## 開發進度總覽

| 優先級 | 計畫數量 | 已完成 | 進度 |
|-------|---------|-------|------|
| P0 基礎組 | X | X | ✅ 100% |
| P1 進階組 | X | X | ✅ 100% |
| P2 專業組 | X | 0 | ⏳ 0% |

---

## P0 基礎組（已完成）

### 完成日期
{日期}

### 功能清單

| 類別 | 名稱 | 檔案路徑 | 狀態 | 備註 |
|------|------|----------|------|------|
| XXX | XXX | `path/to/file.java` | ✅ | |

### 測試覆蓋

| 測試類別 | 檔案路徑 | 測試項目數 |
|---------|----------|-----------|
| XXXTest | `test/.../XXXTest.java` | X |

---

## P1 進階組（已完成）

（同上格式）

---

## 待確認項目（TODO）

| 項目 | 待確認事項 | 優先級 |
|------|-----------|-------|
| XXX | XXX | 中 |

---

## 變更歷史

| 日期 | 版本 | 變更內容 | 作者 |
|------|------|---------|------|
| {日期} | v1.0 | 初版 | {作者} |
```

### 4.2 測試準則更新範本

在 `10.1 單元測試` 章節後新增：

```markdown
### 10.1.1 {優先級} 計算器測試

**{類別}類測試**:

| 測試類別 | 測試項目 | 驗證重點 |
|---------|---------|---------|
| XXXCalculatorTest | 計算正確性、邊界條件 | 值範圍、信號判斷 |

\```
測試: {測試名稱}
Given: {前置條件}
When: {執行動作}
Then:
  - {預期結果 1}
  - {預期結果 2}
\```
```

### 4.3 功能需求更新範本

在 `1.4 依賴關係` 章節後新增：

```markdown
### 1.5 實作進度

> **最後更新**: {日期}

| 優先級 | 指標組 | 計畫數量 | 已完成 | 進度 | 狀態 |
|-------|-------|---------|-------|------|------|
| P0 | 基礎組 | X | X | 100% | ✅ 已完成 |
| P1 | 進階組 | X | X | 100% | ✅ 已完成 |
| P2 | 專業組 | X | 0 | 0% | ⏳ 待開發 |

**P0 已完成**:
- XXX, XXX, XXX

**P1 已完成**:
- 類別 A：XXX, XXX
- 類別 B：XXX, XXX

> 詳細開發記錄請參閱 [開發記錄](../../design/{模組代號}-開發記錄.md)
```

### 4.4 API 規格更新範本

在 `錯誤碼定義` 章節後新增：

```markdown
### 4.X {優先級} 輸出欄位定義

> **新增於**: {日期}

以下為 {優先級} 的輸出欄位說明：

#### {類別}類

| 功能/指標 | 輸出欄位 | 類型 | 說明 |
|---------|---------|------|------|
| XXX | `field_name` | Number | 欄位說明 |
| | `signal_field` | String | 信號：VALUE_A, VALUE_B, VALUE_C |
```

---

## 5. 參考範例

以下模組已完成文件更新，可作為參考：

| 模組 | 開發記錄 | 測試準則 | 功能需求 | API 規格 |
|------|---------|---------|---------|---------|
| M07 技術分析 | [M07-開發記錄](../design/M07-開發記錄.md) | [M07-測試準則](../design/M07-測試準則.md) | [M07-功能需求](../functional/M07-技術分析功能需求.md) | [M07-API規格](../api/M07-API規格.md) |

---

## 6. 注意事項

1. **保持一致性**：遵循現有文件的格式和命名規範
2. **及時更新**：完成開發後立即更新文件，避免遺忘
3. **標註 TODO**：對於需要確認的實作細節，在開發記錄中明確標註
4. **更新日期**：所有修改的文件都要更新「最後更新」日期
5. **交叉參照**：在各文件間建立適當的連結，方便導航

---

## 相關文檔

- [文件製作指南](./00-文件製作指南.md)
- [開發準則](./00-開發準則.md)
- [全系統契約](./00-全系統契約.md)

---

**文件維護者**: 系統架構師
**最後更新**: 2026-01-15
