# M10-æŠ€è¡“å‹æ…‹è¾¨è­˜æ¨¡çµ„ Job æ’ç¨‹é…ç½®

> **æ–‡ä»¶ç·¨è™Ÿ**: JOB-M10
> **æ¨¡çµ„åç¨±**: æŠ€è¡“å‹æ…‹è¾¨è­˜æ¨¡çµ„
> **ç‰ˆæœ¬**: v1.0
> **æœ€å¾Œæ›´æ–°**: 2026-01-12
> **ç‹€æ…‹**: Draft

---

## ğŸ“‹ Job æ’ç¨‹ç¸½è¦½

æœ¬æ–‡ä»¶å®šç¾©æŠ€è¡“å‹æ…‹è¾¨è­˜æ¨¡çµ„çš„æ‰€æœ‰æ‰¹æ¬¡ä½œæ¥­èˆ‡æ’ç¨‹é…ç½®ã€‚

---

## 1. Job æ¸…å–®

| Job ç·¨è™Ÿ | Job åç¨± | Job é¡å‹ | åŸ·è¡Œé »ç‡ | åŸ·è¡Œæ™‚é–“ | å„ªå…ˆç´š | é ä¼°æ™‚é•· |
|---------|---------|---------|---------|---------|-------|---------|
| JOB-M10-001 | DETECT_KLINE_PATTERNS | ANALYSIS | æ¯äº¤æ˜“æ—¥ | 16:20 | P0 | 3-5 åˆ†é˜ |
| JOB-M10-002 | DETECT_CHART_PATTERNS | ANALYSIS | æ¯äº¤æ˜“æ—¥ | 16:25 | P0 | 8-12 åˆ†é˜ |
| JOB-M10-003 | ANALYZE_TRENDS | ANALYSIS | æ¯äº¤æ˜“æ—¥ | 16:35 | P0 | 5-8 åˆ†é˜ |
| JOB-M10-004 | DETECT_SUPPORT_RESISTANCE | ANALYSIS | æ¯äº¤æ˜“æ—¥ | 16:40 | P1 | 5-8 åˆ†é˜ |
| JOB-M10-005 | GENERATE_PATTERN_SIGNALS | ANALYSIS | æ¯äº¤æ˜“æ—¥ | 16:45 | P0 | 3-5 åˆ†é˜ |
| JOB-M10-006 | SCAN_KLINE_MARKET | SCAN | æ¯äº¤æ˜“æ—¥ | 16:50 | P1 | 2-3 åˆ†é˜ |
| JOB-M10-007 | UPDATE_PATTERN_STATISTICS | STATISTICS | æ¯é€±æ—¥ | 06:00 | P2 | 15 åˆ†é˜ |
| JOB-M10-008 | CLEANUP_OLD_PATTERNS | MAINTENANCE | æ¯æœˆ | æ¯æœˆ1æ—¥ 04:00 | P2 | 10 åˆ†é˜ |

---

## 2. Job è©³ç´°è¨­è¨ˆ

### JOB-M10-001: K ç·šå‹æ…‹åµæ¸¬

**Cron è¡¨é”å¼**: `0 20 16 * * MON-FRI`ï¼ˆé€±ä¸€åˆ°é€±äº” 16:20ï¼‰

**åŸ·è¡Œé‚è¼¯**:
1. æª¢æŸ¥ç•¶æ—¥æ˜¯å¦ç‚ºäº¤æ˜“æ—¥
2. ç¢ºèª M06 è‚¡åƒ¹è³‡æ–™åŒæ­¥å®Œæˆ
3. å–å¾—æ‰€æœ‰æ´»èºè‚¡ç¥¨æ¸…å–®
4. åˆ†æ‰¹åŸ·è¡Œ K ç·šå‹æ…‹åµæ¸¬å¼•æ“
5. æ‰¹æ¬¡ INSERT åµæ¸¬çµæœè‡³ kline_pattern_results
6. è¨˜éŒ„ Job åŸ·è¡Œçµæœ

**å‰ç½®æ¢ä»¶**:
- JOB-M06-001 (è‚¡åƒ¹åŒæ­¥) å®Œæˆ

**åƒæ•¸**:
```json
{
  "job_name": "DETECT_KLINE_PATTERNS",
  "trade_date": "2024-12-24",
  "stock_ids": null,
  "batch_size": 100,
  "detection_config": {
    "pattern_categories": ["SINGLE_KLINE", "DOUBLE_KLINE", "TRIPLE_KLINE"],
    "min_strength": 50,
    "lookback_days": 30,
    "include_volume_confirmation": true
  }
}
```

**é æœŸåŸ·è¡Œæ™‚é•·**: 3-5 åˆ†é˜ï¼ˆ1800 æª”è‚¡ç¥¨ï¼‰

**å†ªç­‰æ€§è¨­è¨ˆ**:
- å…ˆåˆªé™¤ç•¶æ—¥å·²å­˜åœ¨çš„ K ç·šå‹æ…‹çµæœï¼š`DELETE WHERE trade_date = ?`
- é‡æ–°æ‰¹æ¬¡ INSERT æ–°çµæœ
- é‡è¤‡åŸ·è¡Œæœƒå®Œå…¨è¦†è“‹ç•¶æ—¥çµæœ

**å¤±æ•—è™•ç†**:
- å–®ä¸€è‚¡ç¥¨åµæ¸¬å¤±æ•—ä¸å½±éŸ¿å…¶ä»–è‚¡ç¥¨ï¼ˆcontinue on errorï¼‰
- è¨˜éŒ„å¤±æ•—è‚¡ç¥¨æ¸…å–®åˆ° job_execution_details
- å¤±æ•—ç‡ > 10% è§¸ç™¼å‘Šè­¦

---

### JOB-M10-002: åœ–è¡¨å‹æ…‹åµæ¸¬

**Cron è¡¨é”å¼**: `0 25 16 * * MON-FRI`ï¼ˆé€±ä¸€åˆ°é€±äº” 16:25ï¼‰

**å‰ç½®æ¢ä»¶**: JOB-M10-001 å®Œæˆ

**åŸ·è¡Œé‚è¼¯**:
1. å–å¾—æ‰€æœ‰æ´»èºè‚¡ç¥¨æ¸…å–®
2. è¼‰å…¥ 120 æ—¥åƒ¹æ ¼è³‡æ–™
3. åŸ·è¡Œæ³¢å³°æ³¢è°·è­˜åˆ¥
4. åŸ·è¡Œåœ–è¡¨å‹æ…‹æ¯”å°
5. æ›´æ–°ç¾æœ‰å‹æ…‹ç‹€æ…‹ï¼ˆFORMING â†’ CONFIRMED/COMPLETED/FAILEDï¼‰
6. å„²å­˜æ–°åµæ¸¬åˆ°çš„å‹æ…‹

**åƒæ•¸**:
```json
{
  "job_name": "DETECT_CHART_PATTERNS",
  "trade_date": "2024-12-24",
  "stock_ids": null,
  "batch_size": 50,
  "detection_config": {
    "pattern_types": [
      "HEAD_SHOULDERS", "DOUBLE_TOP", "DOUBLE_BOTTOM",
      "TRIPLE_TOP", "TRIPLE_BOTTOM", "ASCENDING_TRIANGLE",
      "DESCENDING_TRIANGLE", "SYMMETRICAL_TRIANGLE",
      "FLAG", "PENNANT", "CHANNEL", "GAP"
    ],
    "min_strength": 50,
    "lookback_days": 120,
    "peak_trough_lookback": 5
  }
}
```

**é æœŸåŸ·è¡Œæ™‚é•·**: 8-12 åˆ†é˜ï¼ˆ1800 æª”è‚¡ç¥¨ï¼‰

**å‹æ…‹ç‹€æ…‹æ›´æ–°é‚è¼¯**:
```
FORMING å‹æ…‹:
  - è‹¥çªç ´ç¢ºèª â†’ CONFIRMED
  - è‹¥å¤±æ•ˆï¼ˆè·Œç ´/çªç ´åå‘ï¼‰ â†’ FAILED
  - è‹¥æŒçºŒå½¢æˆ â†’ ç¶­æŒ FORMING

CONFIRMED å‹æ…‹:
  - è‹¥é”åˆ°ç›®æ¨™åƒ¹ â†’ COMPLETED (SUCCESS)
  - è‹¥è§¸ç™¼æ­¢æ â†’ COMPLETED (FAILURE)
  - è‹¥è¶…éæœ‰æ•ˆæœŸ â†’ INVALIDATED
```

---

### JOB-M10-003: è¶¨å‹¢åˆ†æ

**Cron è¡¨é”å¼**: `0 35 16 * * MON-FRI`ï¼ˆé€±ä¸€åˆ°é€±äº” 16:35ï¼‰

**å‰ç½®æ¢ä»¶**:
- JOB-M06-001 (è‚¡åƒ¹åŒæ­¥) å®Œæˆ
- M07 å‡ç·šæŒ‡æ¨™è¨ˆç®—å®Œæˆ

**åŸ·è¡Œé‚è¼¯**:
1. å–å¾—è‚¡ç¥¨æ¸…å–®
2. è¼‰å…¥åƒ¹æ ¼è³‡æ–™èˆ‡æŠ€è¡“æŒ‡æ¨™ï¼ˆMAã€ADXï¼‰
3. è­˜åˆ¥æ³¢å³°æ³¢è°·
4. åˆ†æåƒ¹æ ¼çµæ§‹
5. åˆ¤æ–·è¶¨å‹¢æ–¹å‘èˆ‡å¼·åº¦
6. UPSERT åˆ†æçµæœè‡³ trend_analysis_results

**åƒæ•¸**:
```json
{
  "job_name": "ANALYZE_TRENDS",
  "trade_date": "2024-12-24",
  "stock_ids": null,
  "batch_size": 100,
  "analysis_config": {
    "ma_periods": [5, 10, 20, 60, 120],
    "adx_period": 14,
    "lookback_days": 60,
    "peak_trough_lookback": 5
  }
}
```

**é æœŸåŸ·è¡Œæ™‚é•·**: 5-8 åˆ†é˜

---

### JOB-M10-004: æ”¯æ’å£“åŠ›ä½è­˜åˆ¥

**Cron è¡¨é”å¼**: `0 40 16 * * MON-FRI`ï¼ˆé€±ä¸€åˆ°é€±äº” 16:40ï¼‰

**å‰ç½®æ¢ä»¶**: JOB-M10-003 å®Œæˆ

**åŸ·è¡Œé‚è¼¯**:
1. å–å¾—è‚¡ç¥¨æ¸…å–®
2. è¼‰å…¥åƒ¹æ ¼è³‡æ–™
3. è­˜åˆ¥æ³¢å³°æ³¢è°·æ”¯æ’å£“åŠ›
4. è¨ˆç®—å‡ç·šæ”¯æ’å£“åŠ›ä½
5. è­˜åˆ¥æˆäº¤é‡å¯†é›†å€
6. è¨ˆç®—æ–æ³¢é‚£å¥‘å›æª”ä½
7. æ¨™è¨˜æ•´æ•¸é—œå¡
8. è¨ˆç®—èˆ‡ç•¶å‰åƒ¹æ ¼è·é›¢
9. æ›´æ–°æ”¯æ’å£“åŠ›ä½æœ‰æ•ˆæ€§

**åƒæ•¸**:
```json
{
  "job_name": "DETECT_SUPPORT_RESISTANCE",
  "trade_date": "2024-12-24",
  "stock_ids": null,
  "batch_size": 100,
  "detection_config": {
    "lookback_days": 120,
    "max_levels_per_type": 5,
    "source_weights": {
      "wave_peak_trough": 40,
      "volume_profile": 25,
      "moving_average": 20,
      "psychological": 10,
      "fibonacci": 5
    }
  }
}
```

**é æœŸåŸ·è¡Œæ™‚é•·**: 5-8 åˆ†é˜

**æ”¯æ’å£“åŠ›æœ‰æ•ˆæ€§æ›´æ–°**:
- è‹¥åƒ¹æ ¼æœ‰æ•ˆçªç ´ï¼ˆæ”¶ç›¤åƒ¹çªç ´ + æˆäº¤é‡æ”¾å¤§ï¼‰ â†’ å¤±æ•ˆ
- è‹¥æˆåŠŸæ¸¬è©¦å¾Œåå½ˆ â†’ test_count++
- è¶…é 90 å¤©æœªæ¸¬è©¦ â†’ é™ä½ strength

---

### JOB-M10-005: å‹æ…‹è¨Šè™Ÿç”¢ç”Ÿ

**Cron è¡¨é”å¼**: `0 45 16 * * MON-FRI`ï¼ˆé€±ä¸€åˆ°é€±äº” 16:45ï¼‰

**å‰ç½®æ¢ä»¶**:
- JOB-M10-001 å®Œæˆ
- JOB-M10-002 å®Œæˆ
- JOB-M10-003 å®Œæˆ

**åŸ·è¡Œé‚è¼¯**:
1. å¾ kline_pattern_results å–å¾—ç•¶æ—¥ K ç·šå‹æ…‹
2. å¾ chart_pattern_results å–å¾—ç•¶æ—¥åœ–è¡¨å‹æ…‹è®ŠåŒ–
3. å¾ trend_analysis_results å–å¾—è¶¨å‹¢è®ŠåŒ–
4. æ ¹æ“šå‹æ…‹ç”¢ç”Ÿè¨Šè™Ÿ
5. è¨ˆç®—ç›®æ¨™åƒ¹èˆ‡æ­¢æä½
6. å„²å­˜è‡³ pattern_signals

**åƒæ•¸**:
```json
{
  "job_name": "GENERATE_PATTERN_SIGNALS",
  "trade_date": "2024-12-24",
  "signal_rules": {
    "kline_patterns": {
      "enabled": true,
      "min_strength": 70,
      "bullish_patterns": ["KLINE001", "KLINE020", "KLINE040"],
      "bearish_patterns": ["KLINE003", "KLINE021", "KLINE041"]
    },
    "chart_patterns": {
      "enabled": true,
      "min_strength": 60,
      "trigger_on_confirmation": true
    },
    "trend_patterns": {
      "enabled": true,
      "trigger_on_change": true
    }
  }
}
```

**é æœŸåŸ·è¡Œæ™‚é•·**: 3-5 åˆ†é˜

**è¨Šè™Ÿç”¢ç”Ÿè¦å‰‡**:

| ä¾†æº | æ¢ä»¶ | è¨Šè™Ÿé¡å‹ | å¼·åº¦ |
|-----|------|---------|------|
| K ç·šçœ‹æ¼²åè½‰ | strength >= 70 | BUY | MEDIUM-HIGH |
| K ç·šçœ‹è·Œåè½‰ | strength >= 70 | SELL | MEDIUM-HIGH |
| é›™é‡åº•ç¢ºèª | çªç ´é ¸ç·š | BUY | HIGH |
| é›™é‡é ‚ç¢ºèª | è·Œç ´é ¸ç·š | SELL | HIGH |
| é ­è‚©åº•ç¢ºèª | çªç ´é ¸ç·š | BUY | HIGH |
| é ­è‚©é ‚ç¢ºèª | è·Œç ´é ¸ç·š | SELL | HIGH |
| ä¸Šå‡ä¸‰è§’çªç ´ | å‘ä¸Šçªç ´ | BUY | MEDIUM |
| è¶¨å‹¢è½‰å¤š | å¾ä¸‹é™è½‰ä¸Šå‡ | BUY | HIGH |
| è¶¨å‹¢è½‰ç©º | å¾ä¸Šå‡è½‰ä¸‹é™ | SELL | HIGH |

---

### JOB-M10-006: å…¨å¸‚å ´ K ç·šå‹æ…‹æƒæ

**Cron è¡¨é”å¼**: `0 50 16 * * MON-FRI`ï¼ˆé€±ä¸€åˆ°é€±äº” 16:50ï¼‰

**å‰ç½®æ¢ä»¶**: JOB-M10-001 å®Œæˆ

**åŸ·è¡Œé‚è¼¯**:
1. å¾ kline_pattern_results æŸ¥è©¢ç•¶æ—¥å‹æ…‹
2. æŒ‰è¨Šè™Ÿé¡å‹åˆ†é¡ï¼ˆçœ‹æ¼²/çœ‹è·Œï¼‰
3. æŒ‰å¼·åº¦æ’åº
4. å„²å­˜æƒæçµæœè‡³ Redis å¿«å–

**åƒæ•¸**:
```json
{
  "job_name": "SCAN_KLINE_MARKET",
  "trade_date": "2024-12-24",
  "scan_config": {
    "min_strength": 70,
    "limit_per_signal_type": 50,
    "include_volume_filter": true,
    "min_volume": 1000
  },
  "cache_ttl_minutes": 60
}
```

**é æœŸåŸ·è¡Œæ™‚é•·**: 2-3 åˆ†é˜

---

### JOB-M10-007: å‹æ…‹çµ±è¨ˆæ›´æ–°

**Cron è¡¨é”å¼**: `0 0 6 * * SUN`ï¼ˆæ¯é€±æ—¥ 06:00ï¼‰

**åŸ·è¡Œé‚è¼¯**:
1. å–å¾—éå» N æ—¥çš„å‹æ…‹è¨˜éŒ„
2. è¿½è¹¤å‹æ…‹è¨Šè™Ÿå¾Œçš„åƒ¹æ ¼è¡¨ç¾
3. è¨ˆç®—å„å‹æ…‹çš„æˆåŠŸç‡
4. è¨ˆç®—å¹³å‡æ¼²è·Œå¹…
5. è­˜åˆ¥æœ€ä½³è§¸ç™¼æ¢ä»¶
6. UPSERT è‡³ pattern_statistics

**åƒæ•¸**:
```json
{
  "job_name": "UPDATE_PATTERN_STATISTICS",
  "stat_config": {
    "lookback_years": 3,
    "performance_tracking_days": [1, 3, 5, 10, 20],
    "success_threshold_percent": 2.0,
    "min_occurrences": 5
  }
}
```

**é æœŸåŸ·è¡Œæ™‚é•·**: 15 åˆ†é˜

**æˆåŠŸåˆ¤å®šæ¨™æº–**:
- çœ‹æ¼²è¨Šè™Ÿï¼š5 æ—¥å¾Œæ¼²å¹… >= 2%
- çœ‹è·Œè¨Šè™Ÿï¼š5 æ—¥å¾Œè·Œå¹… >= 2%

---

### JOB-M10-008: æ¸…ç†èˆŠå‹æ…‹çµæœ

**Cron è¡¨é”å¼**: `0 0 4 1 * *`ï¼ˆæ¯æœˆ 1 æ—¥ 04:00ï¼‰

**åŸ·è¡Œé‚è¼¯**:
1. æ¸…ç† kline_pattern_results è¶…éä¿ç•™æœŸçš„è³‡æ–™
2. æ¸…ç† pattern_signals å·²å®Œæˆä¸”éæœŸçš„è³‡æ–™
3. æ¸…ç† support_resistance_levels å·²å¤±æ•ˆçš„è³‡æ–™
4. ä¿ç•™ chart_pattern_results å’Œ trend_analysis_results

**åƒæ•¸**:
```json
{
  "job_name": "CLEANUP_OLD_PATTERNS",
  "retention_config": {
    "kline_patterns_days": 365,
    "completed_signals_days": 90,
    "inactive_sr_levels_days": 90
  }
}
```

**é æœŸåŸ·è¡Œæ™‚é•·**: 10 åˆ†é˜

---

## 3. Job ä¾è³´é—œä¿‚

```
æ¯äº¤æ˜“æ—¥:

M06 Jobs                           M10 Jobs
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
15:00 - SYNC_STOCK_PRICES
        (JOB-M06-001)
          â”‚
          â”‚ M07 è¨ˆç®—å®Œæˆ
          â”‚
          â”‚ å®Œæˆå¾Œè§¸ç™¼
          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                     â”‚
        â–¼                                                     â”‚
16:20 - DETECT_KLINE_PATTERNS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        (JOB-M10-001)                                         â”‚
          â”‚                                                   â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
          â”‚                                       â”‚           â”‚
          â–¼                                       â–¼           â”‚
16:25 - DETECT_CHART_PATTERNS          16:35 - ANALYZE_TRENDS â”‚
        (JOB-M10-002)                         (JOB-M10-003)   â”‚
          â”‚                                       â”‚           â”‚
          â”‚                                       â–¼           â”‚
          â”‚                            16:40 - DETECT_S/R     â”‚
          â”‚                                   (JOB-M10-004)   â”‚
          â”‚                                       â”‚           â”‚
          â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                          â”‚                                   â”‚
                          â–¼                                   â”‚
16:45 - GENERATE_PATTERN_SIGNALS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        (JOB-M10-005)                                         â”‚
          â”‚                                                   â”‚
          â–¼                                                   â”‚
16:50 - SCAN_KLINE_MARKET                                     â”‚
        (JOB-M10-006)                                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¯é€±:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
é€±æ—¥ 06:00 - UPDATE_PATTERN_STATISTICS
             (JOB-M10-007)

æ¯æœˆ:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1æ—¥ 04:00 - CLEANUP_OLD_PATTERNS
            (JOB-M10-008)
```

---

## 4. Job ç›£æ§èˆ‡å‘Šè­¦

### 4.1 ç›£æ§æŒ‡æ¨™

| æŒ‡æ¨™ | é–¾å€¼ | å‘Šè­¦ç­‰ç´š | è™•ç†æ–¹å¼ |
|-----|------|---------|---------|
| Job åŸ·è¡Œæ™‚é•· | > é ä¼°æ™‚é•· Ã— 2 | WARNING | è¨˜éŒ„æ…¢åŸ·è¡Œ |
| Job å¤±æ•—ç‡ | > 10% | ERROR | ç«‹å³å‘Šè­¦ |
| Job é€£çºŒå¤±æ•— | >= 3 æ¬¡ | CRITICAL | ç«‹å³å‘Šè­¦ä¸¦æš«åœ |
| å‹æ…‹åµæ¸¬è¦†è“‹ç‡ | < 95% | WARNING | æª¢æŸ¥è³‡æ–™å®Œæ•´æ€§ |
| K ç·šå‹æ…‹æ•¸é‡ | ç•°å¸¸åä½ï¼ˆ< 50ï¼‰ | WARNING | æª¢æŸ¥åµæ¸¬é‚è¼¯ |
| K ç·šå‹æ…‹æ•¸é‡ | ç•°å¸¸åé«˜ï¼ˆ> 500ï¼‰ | WARNING | æª¢æŸ¥é–€æª»è¨­å®š |

### 4.2 å‘Šè­¦é€šé“

é€é M15 å‘Šè­¦ç³»çµ±ï¼š
- Email
- Slack
- SMSï¼ˆCRITICAL ç­‰ç´šï¼‰

### 4.3 åŸ·è¡Œçµæœè¨˜éŒ„

```json
{
  "job_id": "JOB-M10-001",
  "execution_id": "exec_20241224_162000",
  "start_time": "2024-12-24T16:20:00+08:00",
  "end_time": "2024-12-24T16:24:35+08:00",
  "duration_ms": 275000,
  "status": "SUCCESS",
  "statistics": {
    "total_stocks": 1800,
    "successful": 1795,
    "failed": 5,
    "patterns_detected": 156,
    "bullish_patterns": 89,
    "bearish_patterns": 45,
    "neutral_patterns": 22
  },
  "failed_stocks": ["9999", "8888", "7777", "6666", "5555"],
  "error_message": null
}
```

---

## 5. æ‰‹å‹•åŸ·è¡ŒæŒ‡å¼•

### 5.1 è£œç®—ç‰¹å®šæ—¥æœŸ

```bash
# é€é API è§¸ç™¼ K ç·šå‹æ…‹åµæ¸¬
curl -X POST http://localhost:8080/api/v1/pattern/jobs/detect-kline \
  -H "Content-Type: application/json" \
  -d '{
    "trade_date": "2024-12-20",
    "force_recalculate": true
  }'

# å®Œæ•´å‹æ…‹åµæ¸¬ï¼ˆåŒ…å«æ‰€æœ‰é¡å‹ï¼‰
curl -X POST http://localhost:8080/api/v1/pattern/jobs/detect-all \
  -H "Content-Type: application/json" \
  -d '{
    "trade_date": "2024-12-20",
    "force_recalculate": true
  }'
```

### 5.2 è£œç®—ç‰¹å®šè‚¡ç¥¨

```bash
curl -X POST http://localhost:8080/api/v1/pattern/jobs/detect-kline \
  -H "Content-Type: application/json" \
  -d '{
    "trade_date": "2024-12-24",
    "stock_ids": ["2330", "2317", "2454"],
    "force_recalculate": true
  }'
```

### 5.3 é‡å»ºæƒæå¿«å–

```bash
curl -X POST http://localhost:8080/api/v1/pattern/jobs/scan-market \
  -H "Content-Type: application/json" \
  -d '{
    "trade_date": "2024-12-24",
    "clear_cache": true
  }'
```

### 5.4 æ›´æ–°å‹æ…‹çµ±è¨ˆ

```bash
curl -X POST http://localhost:8080/api/v1/pattern/jobs/update-statistics \
  -H "Content-Type: application/json" \
  -d '{
    "pattern_ids": ["KLINE020", "CHART003"],
    "lookback_years": 3
  }'
```

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [M10 åŠŸèƒ½éœ€æ±‚](../specs/functional/M10-æŠ€è¡“å‹æ…‹è¾¨è­˜åŠŸèƒ½éœ€æ±‚.md)
- [M10 æ¥­å‹™æµç¨‹](../design/M10-æ¥­å‹™æµç¨‹.md)
- [M06 Jobæ’ç¨‹é…ç½®](./M06-Jobæ’ç¨‹é…ç½®.md)
- [M07 Jobæ’ç¨‹é…ç½®](./M07-Jobæ’ç¨‹é…ç½®.md)
- [å…¨ç³»çµ± Job æ¨¡å‹](../specs/technical/00-å…¨ç³»çµ±å¥‘ç´„.md#45-job-æ¨¡å‹)

---

**æ–‡ä»¶ç¶­è­·è€…**: DevOps å·¥ç¨‹å¸«
**æœ€å¾Œæ›´æ–°**: 2026-01-12
**ä¸‹æ¬¡å¯©æ ¸**: 2026-03-31
