# M12-ç¸½ç¶“èˆ‡ç”¢æ¥­åˆ†ææ¨¡çµ„æ¥­å‹™æµç¨‹

> **æ–‡ä»¶ç·¨è™Ÿ**: FLOW-M12
> **æ¨¡çµ„åç¨±**: ç¸½ç¶“èˆ‡ç”¢æ¥­åˆ†ææ¨¡çµ„
> **ç‰ˆæœ¬**: v1.0
> **æœ€å¾Œæ›´æ–°**: 2026-01-14
> **ç‹€æ…‹**: Draft

---

## 1. æ¨¡çµ„æ¶æ§‹

### 1.1 MacroIndustryEngine æ•´é«”æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         M12 MacroIndustryEngine                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        MacroAnalyzer                                 â”‚   â”‚
â”‚  â”‚                        (ç¸½ç¶“åˆ†æå™¨)                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚  â”‚  â”‚ Indicator   â”‚  â”‚ Cycle       â”‚  â”‚ Macro       â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ Tracker     â”‚  â”‚ Determinatorâ”‚  â”‚ Signal      â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ (æŒ‡æ¨™è¿½è¹¤)  â”‚  â”‚ (é€±æœŸåˆ¤æ–·)  â”‚  â”‚ Generator   â”‚                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       IndustryAnalyzer                               â”‚   â”‚
â”‚  â”‚                       (ç”¢æ¥­åˆ†æå™¨)                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚  â”‚  â”‚ Performance â”‚  â”‚ Valuation   â”‚  â”‚ Ranking     â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ Calculator  â”‚  â”‚ Calculator  â”‚  â”‚ Calculator  â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ (ç¸¾æ•ˆè¨ˆç®—)  â”‚  â”‚ (ä¼°å€¼è¨ˆç®—)  â”‚  â”‚ (æ’åè¨ˆç®—)  â”‚                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       RotationAnalyzer                               â”‚   â”‚
â”‚  â”‚                       (è¼ªå‹•åˆ†æå™¨)                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚  â”‚  â”‚ Rotation    â”‚  â”‚ Money Flow  â”‚  â”‚ Industry    â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ Detector    â”‚  â”‚ Analyzer    â”‚  â”‚ Signal      â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ (è¼ªå‹•åµæ¸¬)  â”‚  â”‚ (è³‡é‡‘æµå‘)  â”‚  â”‚ Generator   â”‚                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        SignalPublisher                               â”‚   â”‚
â”‚  â”‚                        (ä¿¡è™Ÿç™¼å¸ƒå™¨)                                  â”‚   â”‚
â”‚  â”‚  - å½™æ•´æ‰€æœ‰ç”¢ç”Ÿçš„ä¿¡è™Ÿ                                                â”‚   â”‚
â”‚  â”‚  - å„²å­˜è‡³ industry_signals                                          â”‚   â”‚
â”‚  â”‚  - ç™¼é€äº‹ä»¶é€šçŸ¥ M13                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 å…ƒä»¶è·è²¬

| å…ƒä»¶ | è·è²¬ |
|-----|------|
| IndicatorTracker | è¿½è¹¤ä¸¦æ›´æ–°ç¸½ç¶“æŒ‡æ¨™æ•¸å€¼ |
| CycleDeterminator | æ ¹æ“šå¤šé …æŒ‡æ¨™åˆ¤æ–·ç¶“æ¿Ÿé€±æœŸéšæ®µ |
| MacroSignalGenerator | ç”¢ç”Ÿç¸½ç¶“ç›¸é—œä¿¡è™Ÿï¼ˆé€±æœŸè®ŠåŒ–ã€åˆ©ç‡èª¿æ•´ç­‰ï¼‰ |
| PerformanceCalculator | è¨ˆç®—ç”¢æ¥­å ±é…¬ç‡ã€å‹•èƒ½ã€å¸‚å ´å»£åº¦ |
| ValuationCalculator | è¨ˆç®—ç”¢æ¥­ä¼°å€¼æŒ‡æ¨™ï¼ˆPEã€PBã€è‚¡åˆ©ç‡ï¼‰ |
| RankingCalculator | è¨ˆç®—ç”¢æ¥­å„é¡æ’å |
| RotationDetector | åµæ¸¬ç”¢æ¥­è¼ªå‹•è¶¨å‹¢ |
| MoneyFlowAnalyzer | åˆ†æç”¢æ¥­è³‡é‡‘æµå‘ |
| IndustrySignalGenerator | ç”¢ç”Ÿç”¢æ¥­è¼ªå‹•ä¿¡è™Ÿ |
| SignalPublisher | å½™æ•´ä¸¦ç™¼å¸ƒæ‰€æœ‰ä¿¡è™Ÿ |

---

## 2. æ ¸å¿ƒæ¥­å‹™æµç¨‹

### 2.1 æ¯æ—¥ç”¢æ¥­ç¸¾æ•ˆè¨ˆç®—æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ¯æ—¥ç”¢æ¥­ç¸¾æ•ˆè¨ˆç®—æµç¨‹                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é–‹å§‹ (æ¯äº¤æ˜“æ—¥ 16:30)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ç¢ºèªäº¤æ˜“æ—¥       â”‚
â”‚    æª¢æŸ¥ç•¶æ—¥æ˜¯å¦ç‚º   â”‚
â”‚    äº¤æ˜“æ—¥           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼ æ˜¯äº¤æ˜“æ—¥
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. è¼‰å…¥è‚¡ç¥¨è³‡æ–™     â”‚
â”‚    - å¾ M06 å–å¾—    â”‚
â”‚      ç•¶æ—¥è‚¡åƒ¹       â”‚
â”‚    - å–å¾—è‚¡ç¥¨å¸‚å€¼   â”‚
â”‚    - å–å¾—æˆäº¤é‡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ä¾ç”¢æ¥­åˆ†çµ„       â”‚
â”‚    - æŒ‰ sector_code â”‚
â”‚      åˆ†çµ„è‚¡ç¥¨       â”‚
â”‚    - è¨ˆç®—æ¬Šé‡       â”‚
â”‚      (å¸‚å€¼åŠ æ¬Š)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. è¨ˆç®—å„ç”¢æ¥­ç¸¾æ•ˆæŒ‡æ¨™                               â”‚
â”‚                                                     â”‚
â”‚    FOR EACH sector:                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ 4.1 è¨ˆç®—å ±é…¬ç‡                              â”‚ â”‚
â”‚    â”‚     - return_1d = Î£(stock_return Ã— weight)  â”‚ â”‚
â”‚    â”‚     - return_5d = ç´¯ç© 5 æ—¥å ±é…¬             â”‚ â”‚
â”‚    â”‚     - return_20d = ç´¯ç© 20 æ—¥å ±é…¬           â”‚ â”‚
â”‚    â”‚     - return_60d = ç´¯ç© 60 æ—¥å ±é…¬           â”‚ â”‚
â”‚    â”‚     - return_ytd = å¹´åˆè‡³ä»Šå ±é…¬             â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ 4.2 è¨ˆç®—å‹•èƒ½æŒ‡æ¨™                            â”‚ â”‚
â”‚    â”‚     - momentum_20d = return_20d / std_20d   â”‚ â”‚
â”‚    â”‚     - relative_strength = return - market   â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ 4.3 è¨ˆç®—å¸‚å ´å»£åº¦                            â”‚ â”‚
â”‚    â”‚     - advance_count = ä¸Šæ¼²å®¶æ•¸              â”‚ â”‚
â”‚    â”‚     - decline_count = ä¸‹è·Œå®¶æ•¸              â”‚ â”‚
â”‚    â”‚     - breadth = advance / total Ã— 100      â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ 4.4 è¨ˆç®—æ’å                                â”‚ â”‚
â”‚    â”‚     - return_rank (ä¾ return_20d æ’åº)      â”‚ â”‚
â”‚    â”‚     - momentum_rank (ä¾ momentum_20d æ’åº)  â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. å„²å­˜çµæœ         â”‚
â”‚    - æ‰¹æ¬¡å¯«å…¥       â”‚
â”‚      sector_        â”‚
â”‚      performance    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
çµæŸ
```

### 2.2 ç”¢æ¥­ç¸¾æ•ˆè¨ˆç®—æ¼”ç®—æ³•

```java
/**
 * è¨ˆç®—å–®ä¸€ç”¢æ¥­ç¸¾æ•ˆ
 */
public SectorPerformance calculateSectorPerformance(
        String sectorCode,
        LocalDate tradeDate,
        List<StockPriceData> stockPrices,
        List<StockClassification> classifications) {

    // 1. ç¯©é¸è©²ç”¢æ¥­è‚¡ç¥¨
    Set<String> sectorStockIds = classifications.stream()
        .filter(c -> c.getSectorCode().equals(sectorCode))
        .filter(c -> c.getEndDate() == null)
        .map(StockClassification::getStockId)
        .collect(Collectors.toSet());

    List<StockPriceData> sectorStocks = stockPrices.stream()
        .filter(s -> sectorStockIds.contains(s.getStockId()))
        .collect(Collectors.toList());

    // 2. è¨ˆç®—ç¸½å¸‚å€¼èˆ‡æ¬Šé‡
    BigDecimal totalMarketCap = sectorStocks.stream()
        .map(StockPriceData::getMarketCap)
        .reduce(BigDecimal.ZERO, BigDecimal::add);

    // 3. è¨ˆç®—å¸‚å€¼åŠ æ¬Šå ±é…¬ç‡
    BigDecimal return1d = BigDecimal.ZERO;
    int advanceCount = 0, declineCount = 0, unchangedCount = 0;

    for (StockPriceData stock : sectorStocks) {
        BigDecimal weight = stock.getMarketCap()
            .divide(totalMarketCap, 6, RoundingMode.HALF_UP);
        BigDecimal stockReturn = stock.getChangePercent()
            .divide(BigDecimal.valueOf(100), 6, RoundingMode.HALF_UP);

        return1d = return1d.add(stockReturn.multiply(weight));

        // æ¼²è·Œå®¶æ•¸çµ±è¨ˆ
        if (stock.getChangePercent().compareTo(BigDecimal.ZERO) > 0) {
            advanceCount++;
        } else if (stock.getChangePercent().compareTo(BigDecimal.ZERO) < 0) {
            declineCount++;
        } else {
            unchangedCount++;
        }
    }

    // 4. è¨ˆç®—å¤šæœŸå ±é…¬ç‡
    BigDecimal return5d = calculateCumulativeReturn(sectorCode, tradeDate, 5);
    BigDecimal return20d = calculateCumulativeReturn(sectorCode, tradeDate, 20);
    BigDecimal return60d = calculateCumulativeReturn(sectorCode, tradeDate, 60);
    BigDecimal returnYtd = calculateYtdReturn(sectorCode, tradeDate);

    // 5. è¨ˆç®—å‹•èƒ½æŒ‡æ¨™
    BigDecimal volatility20d = calculateVolatility(sectorCode, tradeDate, 20);
    BigDecimal momentum20d = volatility20d.compareTo(BigDecimal.ZERO) != 0
        ? return20d.divide(volatility20d, 4, RoundingMode.HALF_UP)
        : BigDecimal.ZERO;

    // 6. è¨ˆç®—ç›¸å°å¼·åº¦
    BigDecimal marketReturn20d = getMarketReturn20d(tradeDate);
    BigDecimal relativeStrength = return20d.subtract(marketReturn20d);

    // 7. è¨ˆç®—å¸‚å ´å»£åº¦
    int totalStocks = sectorStocks.size();
    BigDecimal breadth = totalStocks > 0
        ? BigDecimal.valueOf(advanceCount * 100.0 / totalStocks)
        : BigDecimal.ZERO;

    // 8. å»ºæ§‹çµæœ
    return SectorPerformance.builder()
        .sectorCode(sectorCode)
        .tradeDate(tradeDate)
        .return1d(return1d)
        .return5d(return5d)
        .return20d(return20d)
        .return60d(return60d)
        .returnYtd(returnYtd)
        .momentum20d(momentum20d)
        .relativeStrength(relativeStrength)
        .advanceCount(advanceCount)
        .declineCount(declineCount)
        .unchangedCount(unchangedCount)
        .breadth(breadth)
        .totalMarketCap(totalMarketCap.longValue())
        .build();
}
```

---

### 2.3 ç¶“æ¿Ÿé€±æœŸåˆ¤æ–·æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç¶“æ¿Ÿé€±æœŸåˆ¤æ–·æµç¨‹                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é–‹å§‹ (æ¯æœˆç¸½ç¶“æ•¸æ“šæ›´æ–°å¾Œ)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. è¼‰å…¥é—œéµç¸½ç¶“æŒ‡æ¨™                     â”‚
â”‚    - TW_LEADING_INDEX (æ™¯æ°£é ˜å…ˆæŒ‡æ¨™)    â”‚
â”‚    - TW_COINCIDENT_INDEX (åŒæ™‚æŒ‡æ¨™)     â”‚
â”‚    - TW_MONITOR_SCORE (æ™¯æ°£ç‡ˆè™Ÿ)        â”‚
â”‚    - TW_PMI (è£½é€ æ¥­ PMI)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. è¨ˆç®—æŒ‡æ¨™è¶¨å‹¢                         â”‚
â”‚    - é ˜å…ˆæŒ‡æ¨™ 3 å€‹æœˆç§»å‹•æ–¹å‘            â”‚
â”‚    - åŒæ™‚æŒ‡æ¨™ç›¸å°æ­·å²ä½ç½®               â”‚
â”‚    - ç‡ˆè™Ÿåˆ†æ•¸è¶¨å‹¢                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. é€±æœŸéšæ®µåˆ¤æ–·                                                 â”‚
â”‚                                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ IF leading_trend == UP AND coincident_level == LOW      â”‚ â”‚
â”‚    â”‚    â†’ RECOVERY (å¾©ç”¦æœŸ)                                  â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ ELSE IF leading_trend == UP AND coincident_level >= MID â”‚ â”‚
â”‚    â”‚    â†’ EXPANSION (æ“´å¼µæœŸ)                                 â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ ELSE IF leading_trend == DOWN AND coincident_level HIGH â”‚ â”‚
â”‚    â”‚    â†’ OVERHEATING (éç†±æœŸ)                               â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ ELSE IF leading_trend == DOWN AND coincident_level < HI â”‚ â”‚
â”‚    â”‚    â†’ RECESSION (è¡°é€€æœŸ)                                 â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ ELSE IF leading_trend == FLAT AND coincident_level LOW  â”‚ â”‚
â”‚    â”‚    â†’ DEPRESSION (è•­æ¢æœŸ)                                â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ ELSE                                                    â”‚ â”‚
â”‚    â”‚    â†’ UNCERTAIN (ä¸ç¢ºå®š)                                 â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. è¨ˆç®—åˆ¤æ–·ä¿¡å¿ƒåº¦                       â”‚
â”‚    - åŸºæ–¼æŒ‡æ¨™ä¸€è‡´æ€§                     â”‚
â”‚    - åŸºæ–¼è¶¨å‹¢å¼·åº¦                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. æ¯”è¼ƒå‰ä¸€é€±æœŸ                         â”‚
â”‚    - æª¢æŸ¥æ˜¯å¦ç™¼ç”Ÿé€±æœŸè½‰æ›               â”‚
â”‚    - è¨˜éŒ„è½‰æ›æ™‚é–“                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ é€±æœŸè®ŠåŒ–?
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æ˜¯                 â”‚ å¦
    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6a. ç”¢ç”Ÿé€±æœŸ    â”‚  â”‚ 6b. æ›´æ–°ç•¶å‰    â”‚
â”‚     è½‰æ›ä¿¡è™Ÿ    â”‚  â”‚     é€±æœŸæŒçºŒ    â”‚
â”‚  MACRO_SIG_001  â”‚  â”‚     æ™‚é–“        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. å„²å­˜é€±æœŸåˆ¤æ–·çµæœ                     â”‚
â”‚    - æ›´æ–° economic_cycles               â”‚
â”‚    - å„²å­˜ä¿¡è™Ÿåˆ° industry_signals        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
çµæŸ
```

### 2.4 é€±æœŸåˆ¤æ–·æ¼”ç®—æ³•

```java
/**
 * åˆ¤æ–·ç¶“æ¿Ÿé€±æœŸéšæ®µ
 */
public CycleDetermination determineCycleStage(LocalDate analysisDate) {

    // 1. è¼‰å…¥é—œéµæŒ‡æ¨™æœ€è¿‘ 6 å€‹æœˆè³‡æ–™
    List<MacroIndicatorValue> leadingValues =
        loadIndicatorHistory("TW_LEADING_INDEX", analysisDate, 6);
    List<MacroIndicatorValue> coincidentValues =
        loadIndicatorHistory("TW_COINCIDENT_INDEX", analysisDate, 6);
    List<MacroIndicatorValue> monitorValues =
        loadIndicatorHistory("TW_MONITOR_SCORE", analysisDate, 6);

    // 2. è¨ˆç®—é ˜å…ˆæŒ‡æ¨™è¶¨å‹¢ï¼ˆ3 å€‹æœˆï¼‰
    Trend leadingTrend = calculateTrend(leadingValues.subList(0, 3));

    // 3. è¨ˆç®—åŒæ™‚æŒ‡æ¨™ç›¸å°ä½ç½®ï¼ˆ5 å¹´ç™¾åˆ†ä½ï¼‰
    BigDecimal coincidentValue = coincidentValues.get(0).getValue();
    Level coincidentLevel = calculateHistoricalLevel(
        "TW_COINCIDENT_INDEX", coincidentValue, 5);

    // 4. æ ¹æ“šè¦å‰‡åˆ¤æ–·é€±æœŸéšæ®µ
    CycleStage stage;
    BigDecimal confidence;

    if (leadingTrend == Trend.UP && coincidentLevel == Level.LOW) {
        stage = CycleStage.RECOVERY;
        confidence = calculateConfidence(leadingTrend, coincidentLevel, Trend.UP, Level.LOW);
    } else if (leadingTrend == Trend.UP &&
               (coincidentLevel == Level.MID || coincidentLevel == Level.HIGH)) {
        stage = CycleStage.EXPANSION;
        confidence = calculateConfidence(leadingTrend, coincidentLevel, Trend.UP, Level.MID);
    } else if (leadingTrend == Trend.DOWN && coincidentLevel == Level.HIGH) {
        stage = CycleStage.OVERHEATING;
        confidence = calculateConfidence(leadingTrend, coincidentLevel, Trend.DOWN, Level.HIGH);
    } else if (leadingTrend == Trend.DOWN &&
               (coincidentLevel == Level.MID || coincidentLevel == Level.LOW)) {
        stage = CycleStage.RECESSION;
        confidence = calculateConfidence(leadingTrend, coincidentLevel, Trend.DOWN, Level.MID);
    } else if (leadingTrend == Trend.FLAT && coincidentLevel == Level.LOW) {
        stage = CycleStage.DEPRESSION;
        confidence = calculateConfidence(leadingTrend, coincidentLevel, Trend.FLAT, Level.LOW);
    } else {
        stage = CycleStage.UNCERTAIN;
        confidence = BigDecimal.valueOf(0.5);
    }

    // 5. å»ºæ§‹åˆ¤æ–·çµæœ
    return CycleDetermination.builder()
        .stage(stage)
        .confidence(confidence)
        .analysisDate(analysisDate)
        .keyIndicators(Map.of(
            "leading_index", Map.of(
                "value", leadingValues.get(0).getValue(),
                "trend", leadingTrend.name()
            ),
            "coincident_index", Map.of(
                "value", coincidentValue,
                "level", coincidentLevel.name()
            ),
            "monitor_score", Map.of(
                "value", monitorValues.get(0).getValue()
            )
        ))
        .build();
}

private Trend calculateTrend(List<MacroIndicatorValue> values) {
    if (values.size() < 2) return Trend.FLAT;

    BigDecimal latest = values.get(0).getValue();
    BigDecimal previous = values.get(values.size() - 1).getValue();
    BigDecimal change = latest.subtract(previous);
    BigDecimal threshold = previous.multiply(BigDecimal.valueOf(0.01)); // 1% è®Šå‹•

    if (change.compareTo(threshold) > 0) return Trend.UP;
    if (change.compareTo(threshold.negate()) < 0) return Trend.DOWN;
    return Trend.FLAT;
}

enum Trend { UP, DOWN, FLAT }
enum Level { LOW, MID, HIGH }
```

---

### 2.5 ç”¢æ¥­è¼ªå‹•åˆ†ææµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¢æ¥­è¼ªå‹•åˆ†ææµç¨‹                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é–‹å§‹ (æ¯é€±äº”æ”¶ç›¤å¾Œ)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. è¼‰å…¥éå» N é€±ç”¢æ¥­ç¸¾æ•ˆè³‡æ–™            â”‚
â”‚    - å¾ sector_performance å–å¾—         â”‚
â”‚    - é è¨­ N = 12 é€±                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. è¨ˆç®—æ¯é€±ç”¢æ¥­æ’å                     â”‚
â”‚    - ä¾ return_5d æ’åº                  â”‚
â”‚    - è¨˜éŒ„å„é€±æ’å                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. è¼ªå‹•è¶¨å‹¢åˆ†æ                                                 â”‚
â”‚                                                                 â”‚
â”‚    FOR EACH sector:                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ 3.1 è¨ˆç®—å¹³å‡æ’å                                        â”‚ â”‚
â”‚    â”‚     avg_rank = Î£(weekly_rank) / N                       â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ 3.2 è¨ˆç®—æ’åè®ŠåŒ–                                        â”‚ â”‚
â”‚    â”‚     rank_change = current_rank - Né€±å‰_rank             â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ 3.3 è¨ˆç®—å‹•èƒ½åˆ†æ•¸                                        â”‚ â”‚
â”‚    â”‚     momentum_score = f(avg_rank, rank_change, breadth)  â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ 3.4 åˆ¤æ–·è¼ªå‹•ç‹€æ…‹                                        â”‚ â”‚
â”‚    â”‚     - LEADING: avg_rank <= top 20%                      â”‚ â”‚
â”‚    â”‚     - IMPROVING: rank_change > 5 ä¸”é€²å…¥ top 1/3         â”‚ â”‚
â”‚    â”‚     - WEAKENING: rank_change < -5 ä¸”è·Œå‡º top 1/3        â”‚ â”‚
â”‚    â”‚     - LAGGING: avg_rank >= bottom 20%                   â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. è­˜åˆ¥è¼ªå‹•ä¿¡è™Ÿ                         â”‚
â”‚    - æ–°èˆˆé ˜æ¼²ç”¢æ¥­ (IND_SIG_003)         â”‚
â”‚    - æŒçºŒé ˜æ¼²ç”¢æ¥­ (IND_SIG_004)         â”‚
â”‚    - ç”¢æ¥­è½‰å¼·/è½‰å¼± (IND_SIG_001/002)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. èˆ‡ç¶“æ¿Ÿé€±æœŸäº¤å‰é©—è­‰                   â”‚
â”‚    - æª¢æŸ¥è¼ªå‹•æ˜¯å¦ç¬¦åˆé€±æœŸç‰¹å¾µ           â”‚
â”‚    - ç”¢ç”Ÿé€±æœŸæ€§è¼ªå‹•å»ºè­°                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. å„²å­˜åˆ†æçµæœèˆ‡ä¿¡è™Ÿ                   â”‚
â”‚    - å„²å­˜è¼ªå‹•ç‹€æ…‹                       â”‚
â”‚    - ç”¢ç”Ÿä¸¦å„²å­˜ä¿¡è™Ÿ                     â”‚
â”‚    - ç™¼é€äº‹ä»¶é€šçŸ¥ M13                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
çµæŸ
```

### 2.6 è¼ªå‹•åˆ†ææ¼”ç®—æ³•

```java
/**
 * åˆ†æç”¢æ¥­è¼ªå‹•
 */
public RotationAnalysisResult analyzeRotation(LocalDate analysisDate, int weeks) {

    // 1. è¼‰å…¥æ¯é€±ç¸¾æ•ˆè³‡æ–™
    List<LocalDate> weekEndDates = getWeekEndDates(analysisDate, weeks);
    Map<String, List<Integer>> sectorWeeklyRanks = new HashMap<>();

    for (LocalDate weekEnd : weekEndDates) {
        List<SectorPerformance> weeklyPerf =
            sectorPerformanceRepository.findByTradeDateOrderByReturn5dDesc(weekEnd);

        for (int i = 0; i < weeklyPerf.size(); i++) {
            String sectorCode = weeklyPerf.get(i).getSectorCode();
            sectorWeeklyRanks.computeIfAbsent(sectorCode, k -> new ArrayList<>())
                .add(i + 1);  // æ’åå¾ 1 é–‹å§‹
        }
    }

    // 2. è¨ˆç®—å„ç”¢æ¥­è¼ªå‹•ç‹€æ…‹
    int totalSectors = sectorWeeklyRanks.size();
    int topThreshold = totalSectors / 3;
    int bottomThreshold = totalSectors * 2 / 3;

    List<SectorRotationStatus> rotationStatuses = new ArrayList<>();

    for (Map.Entry<String, List<Integer>> entry : sectorWeeklyRanks.entrySet()) {
        String sectorCode = entry.getKey();
        List<Integer> ranks = entry.getValue();

        // è¨ˆç®—å¹³å‡æ’å
        double avgRank = ranks.stream().mapToInt(Integer::intValue).average().orElse(0);

        // è¨ˆç®—æ’åè®ŠåŒ–
        int currentRank = ranks.get(0);
        int previousRank = ranks.get(ranks.size() - 1);
        int rankChange = previousRank - currentRank;  // æ­£å€¼è¡¨ç¤ºæ’åä¸Šå‡ï¼ˆæ•¸å­—è®Šå°ï¼‰

        // è¨ˆç®—åœ¨å‰ 1/3 çš„é€±æ•¸
        long weeksInTop = ranks.stream().filter(r -> r <= topThreshold).count();

        // åˆ¤æ–·è¼ªå‹•ç‹€æ…‹
        RotationStatus status;
        if (avgRank <= totalSectors * 0.2) {
            status = RotationStatus.LEADING;
        } else if (rankChange > 5 && currentRank <= topThreshold) {
            status = RotationStatus.IMPROVING;
        } else if (rankChange < -5 && currentRank > topThreshold) {
            status = RotationStatus.WEAKENING;
        } else if (avgRank >= totalSectors * 0.8) {
            status = RotationStatus.LAGGING;
        } else {
            status = RotationStatus.NEUTRAL;
        }

        // è¨ˆç®—å‹•èƒ½åˆ†æ•¸ (0-100)
        double momentumScore = calculateMomentumScore(avgRank, rankChange, totalSectors);

        rotationStatuses.add(SectorRotationStatus.builder()
            .sectorCode(sectorCode)
            .currentRank(currentRank)
            .avgRank(avgRank)
            .rankChange(rankChange)
            .weeksInTop(weeksInTop)
            .status(status)
            .momentumScore(momentumScore)
            .weeklyRanks(ranks)
            .build());
    }

    // 3. ç”¢ç”Ÿè¼ªå‹•ä¿¡è™Ÿ
    List<IndustrySignal> signals = generateRotationSignals(rotationStatuses, analysisDate);

    return RotationAnalysisResult.builder()
        .analysisDate(analysisDate)
        .periodWeeks(weeks)
        .sectorStatuses(rotationStatuses)
        .signals(signals)
        .build();
}

private double calculateMomentumScore(double avgRank, int rankChange, int totalSectors) {
    // æ’åè¶Šä½ï¼ˆæ•¸å­—è¶Šå°ï¼‰åˆ†æ•¸è¶Šé«˜
    double rankScore = (1 - avgRank / totalSectors) * 50;
    // æ’åè®ŠåŒ–è¶Šå¤§åˆ†æ•¸è¶Šé«˜
    double changeScore = Math.min(Math.max(rankChange + 10, 0), 20) / 20.0 * 50;
    return rankScore + changeScore;
}
```

---

## 3. M13 ä¿¡è™Ÿæ¶ˆè²»æµç¨‹

### 3.1 ä¿¡è™Ÿç™¼å¸ƒèˆ‡æ¶ˆè²»æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         M12 â†’ M13 ä¿¡è™Ÿæ¶ˆè²»æµç¨‹                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    M12                                    M13
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

æ¯æ—¥/æ¯é€±åˆ†æå®Œæˆ
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¢ç”Ÿä¿¡è™Ÿ            â”‚
â”‚ - INDUSTRY_ROTATION â”‚
â”‚ - INDUSTRY_MOMENTUM â”‚
â”‚ - INDUSTRY_VALUATIONâ”‚
â”‚ - MACRO_*           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å„²å­˜åˆ°              â”‚
â”‚ industry_signals    â”‚
â”‚ (is_consumed=false) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç™¼å¸ƒäº‹ä»¶            â”‚
â”‚ INDUSTRY_SIGNALS_   â”‚
â”‚ READY               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ M13 æ¥æ”¶äº‹ä»¶        â”‚
                                       â”‚ è§¸ç™¼æ¶ˆè²»æµç¨‹        â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                       â”‚ æŸ¥è©¢æœªæ¶ˆè²»ä¿¡è™Ÿ      â”‚
                                       â”‚ GET /industry/      â”‚
                                       â”‚ signals/unconsumed  â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿”å›æœªæ¶ˆè²»ä¿¡è™Ÿ      â”‚
â”‚ [signal_1,          â”‚
â”‚  signal_2, ...]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                       â”‚ M13 æ•´åˆä¿¡è™Ÿ        â”‚
                                       â”‚ - èˆ‡å…¶ä»–æ¨¡çµ„ä¿¡è™Ÿ    â”‚
                                       â”‚   åˆä½µ              â”‚
                                       â”‚ - è©•åˆ†èˆ‡æ’åº        â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                       â”‚ æ¨™è¨˜ä¿¡è™Ÿå·²æ¶ˆè²»      â”‚
                                       â”‚ POST /industry/     â”‚
                                       â”‚ signals/consumed    â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ›´æ–°ä¿¡è™Ÿç‹€æ…‹        â”‚
â”‚ is_consumed = true  â”‚
â”‚ consumed_at = now   â”‚
â”‚ consumed_by = M13   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ç”¢æ¥­ä¼°å€¼è¨ˆç®—æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¢æ¥­ä¼°å€¼è¨ˆç®—æµç¨‹                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é–‹å§‹ (æ¯äº¤æ˜“æ—¥ 17:00)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ç¢ºèª M08 è²¡å‹™æŒ‡æ¨™å·²æ›´æ–°              â”‚
â”‚    - æª¢æŸ¥ PE, PB ç­‰æŒ‡æ¨™æ˜¯å¦è¨ˆç®—å®Œæˆ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. è¼‰å…¥å€‹è‚¡ä¼°å€¼è³‡æ–™                     â”‚
â”‚    - å¾ M08 å–å¾— PE, PB, è‚¡åˆ©ç‡         â”‚
â”‚    - è¼‰å…¥è‚¡ç¥¨å¸‚å€¼                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. è¨ˆç®—ç”¢æ¥­ä¼°å€¼æŒ‡æ¨™                                             â”‚
â”‚                                                                 â”‚
â”‚    FOR EACH sector:                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ 3.1 è¨ˆç®—å¸‚å€¼åŠ æ¬Š PE                                     â”‚ â”‚
â”‚    â”‚     sector_pe = Î£(stock_pe Ã— market_cap) / Î£(market_cap)â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ 3.2 è¨ˆç®—å¸‚å€¼åŠ æ¬Š PB                                     â”‚ â”‚
â”‚    â”‚     sector_pb = Î£(stock_pb Ã— market_cap) / Î£(market_cap)â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ 3.3 è¨ˆç®—å¸‚å€¼åŠ æ¬Šè‚¡åˆ©ç‡                                  â”‚ â”‚
â”‚    â”‚     sector_dy = Î£(stock_dy Ã— market_cap) / Î£(market_cap)â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ 3.4 è¨ˆç®—æ­·å²ç™¾åˆ†ä½                                      â”‚ â”‚
â”‚    â”‚     - å–å¾—éå» 5 å¹´ PE æ­·å²                             â”‚ â”‚
â”‚    â”‚     - pe_percentile = æ’åä½ç½® / ç¸½æ•¸ Ã— 100            â”‚ â”‚
â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚ 3.5 åˆ¤æ–·ä¼°å€¼ä¿¡è™Ÿ                                        â”‚ â”‚
â”‚    â”‚     - pe_percentile < 20 â†’ UNDERVALUED                 â”‚ â”‚
â”‚    â”‚     - pe_percentile > 80 â†’ OVERVALUED                  â”‚ â”‚
â”‚    â”‚     - å…¶ä»– â†’ FAIR                                       â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. è¨ˆç®—ç›¸å°å¤§ç›¤ä¼°å€¼                     â”‚
â”‚    - pe_vs_market = (sector_pe / market_pe - 1) Ã— 100       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. å„²å­˜ä¼°å€¼çµæœ                         â”‚
â”‚    - æ‰¹æ¬¡å¯«å…¥ sector_valuation          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. ç”¢ç”Ÿä¼°å€¼ç•°å¸¸ä¿¡è™Ÿ                     â”‚
â”‚    - IND_SIG_005 (ä¼°å€¼åä½)             â”‚
â”‚    - IND_SIG_006 (ä¼°å€¼åé«˜)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
çµæŸ
```

---

## 5. éŒ¯èª¤è™•ç†æµç¨‹

### 5.1 è³‡æ–™è¼‰å…¥å¤±æ•—è™•ç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         è³‡æ–™è¼‰å…¥å¤±æ•—è™•ç†æµç¨‹                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è³‡æ–™è¼‰å…¥è«‹æ±‚
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å˜—è©¦è¼‰å…¥è³‡æ–™        â”‚
â”‚ (M06/M08 ä¾è³´)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ è¼‰å…¥å¤±æ•—?
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æ˜¯                                 â”‚ å¦
    â–¼                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ¤æ–·å¤±æ•—é¡å‹        â”‚          â”‚ æ­£å¸¸è™•ç†            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€ è³‡æ–™å°šæœªæ›´æ–° â”€â”€â–¶ ç­‰å¾…ä¸¦é‡è©¦ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
    â”‚
    â”œâ”€â”€ é€£ç·šé€¾æ™‚ â”€â”€â”€â”€â”€â”€â–¶ è¨˜éŒ„éŒ¯èª¤ï¼Œä½¿ç”¨å‰ä¸€æ—¥è³‡æ–™
    â”‚
    â”œâ”€â”€ è³‡æ–™æ ¼å¼éŒ¯èª¤ â”€â”€â–¶ è¨˜éŒ„éŒ¯èª¤ï¼Œè·³éè©²ç­†
    â”‚
    â””â”€â”€ å…¶ä»–éŒ¯èª¤ â”€â”€â”€â”€â”€â”€â–¶ è¨˜éŒ„éŒ¯èª¤ï¼Œç™¼é€å‘Šè­¦
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ è¨˜éŒ„ diagnostics    â”‚
    â”‚ - error_type        â”‚
    â”‚ - error_message     â”‚
    â”‚ - affected_sectors  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [M12 åŠŸèƒ½éœ€æ±‚](../specs/functional/M12-ç¸½ç¶“ç”¢æ¥­åˆ†æåŠŸèƒ½éœ€æ±‚.md)
- [M12 è³‡æ–™åº«è¨­è¨ˆ](./M12-è³‡æ–™åº«è¨­è¨ˆ.md)
- [M12 Job æ’ç¨‹é…ç½®](../deployment/M12-Jobæ’ç¨‹é…ç½®.md)
- [M06 è³‡æ–™ç®¡ç†æ¨¡çµ„](../specs/functional/M06-è³‡æ–™ç®¡ç†åŠŸèƒ½éœ€æ±‚.md)
- [M08 åŸºæœ¬é¢åˆ†ææ¨¡çµ„](../specs/functional/M08-åŸºæœ¬é¢åˆ†æåŠŸèƒ½éœ€æ±‚.md)
- [M13 ä¿¡è™Ÿå¼•æ“](../specs/functional/M13-ä¿¡è™Ÿå¼•æ“åŠŸèƒ½éœ€æ±‚.md)

---

**æ–‡ä»¶ç¶­è­·è€…**: ç³»çµ±åˆ†æå¸«
**æœ€å¾Œæ›´æ–°**: 2026-01-14
**ä¸‹æ¬¡å¯©æ ¸**: 2026-04-14
