# M10-æŠ€è¡“å‹æ…‹è¾¨è­˜æ¨¡çµ„æ¥­å‹™æµç¨‹

> **æ–‡ä»¶ç·¨è™Ÿ**: BIZ-M10
> **æ¨¡çµ„åç¨±**: æŠ€è¡“å‹æ…‹è¾¨è­˜æ¨¡çµ„
> **ç‰ˆæœ¬**: v1.0
> **æœ€å¾Œæ›´æ–°**: 2026-01-12
> **ç‹€æ…‹**: Draft

---

## ğŸ“‹ æ¥­å‹™æµç¨‹ç¸½è¦½

æœ¬æ–‡ä»¶å®šç¾©æŠ€è¡“å‹æ…‹è¾¨è­˜æ¨¡çµ„çš„æ ¸å¿ƒæ¥­å‹™æµç¨‹èˆ‡å¼•æ“é‹ä½œæ©Ÿåˆ¶ã€‚

---

## 1. å‹æ…‹è¾¨è­˜å¼•æ“æ¶æ§‹

### 1.1 å¼•æ“è¨­è¨ˆï¼ˆåƒè€ƒ M07/M08/M09 æ¨¡å¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PatternEngineï¼ˆå¼•æ“ä»‹é¢ï¼‰                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚             DefaultPatternEngine                        â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚       PatternDetectorRegistry                     â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚       PatternDetector ä»‹é¢                  â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  KLine     â”‚ â”‚   Chart    â”‚             â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Pattern   â”‚ â”‚  Pattern   â”‚             â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Detector  â”‚ â”‚  Detector  â”‚             â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Trend     â”‚ â”‚  Support/Resistance    â”‚ â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Pattern   â”‚ â”‚      Detector          â”‚ â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Detector  â”‚ â”‚                        â”‚ â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚         SignalGenerator               â”‚  â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚KLine Sigâ”‚ â”‚Chart Sigâ”‚ â”‚Trend Sigâ”‚ â”‚  â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚Generatorâ”‚ â”‚Generatorâ”‚ â”‚Generatorâ”‚ â”‚  â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 åµæ¸¬å™¨åˆ†é¡

| é¡åˆ¥ | Category | åŒ…å«åµæ¸¬å™¨ | èªªæ˜ |
|-----|----------|-----------|------|
| K ç·šå‹æ…‹ | KLINE_PATTERN | SingleKLineDetector, DoubleKLineDetector, TripleKLineDetector, MultiKLineDetector | å„é¡ K ç·šçµ„åˆå‹æ…‹ |
| åœ–è¡¨å‹æ…‹ | CHART_PATTERN | HeadAndShouldersDetector, DoubleTopBottomDetector, TriangleDetector, FlagDetector, GapDetector | ç¶“å…¸åœ–è¡¨å‹æ…‹ |
| è¶¨å‹¢å‹æ…‹ | TREND_PATTERN | TrendDirectionDetector, TrendStrengthAnalyzer, TrendChangeDetector | è¶¨å‹¢åˆ†æ |
| æ”¯æ’å£“åŠ› | SUPPORT_RESISTANCE | PeakTroughDetector, VolumeProfileAnalyzer, MALevelDetector, FibonacciDetector | é—œéµåƒ¹ä½è­˜åˆ¥ |
| è¨Šè™Ÿç”¢ç”Ÿ | SIGNAL | KLineSignalGenerator, ChartSignalGenerator, TrendSignalGenerator | äº¤æ˜“è¨Šè™Ÿç”¢ç”Ÿ |

### 1.3 åµæ¸¬è¨ˆåŠƒï¼ˆPatternDetectionPlanï¼‰

```java
public class PatternDetectionPlan {
    private boolean includeKLinePatterns = true;      // K ç·šå‹æ…‹åµæ¸¬
    private boolean includeChartPatterns = true;       // åœ–è¡¨å‹æ…‹åµæ¸¬
    private boolean includeTrendPatterns = true;       // è¶¨å‹¢å‹æ…‹åµæ¸¬
    private boolean includeSupportResistance = true;   // æ”¯æ’å£“åŠ›è­˜åˆ¥
    private boolean includeSignals = true;             // è¨Šè™Ÿç”¢ç”Ÿ
    private int minPatternStrength = 50;               // æœ€ä½å‹æ…‹å¼·åº¦
    private int lookbackPeriod = 120;                  // å›æº¯å¤©æ•¸

    // é è¨­è¨ˆåŠƒï¼šå®Œæ•´åµæ¸¬
    public static PatternDetectionPlan full() {
        return PatternDetectionPlan.builder()
            .includeKLinePatterns(true)
            .includeChartPatterns(true)
            .includeTrendPatterns(true)
            .includeSupportResistance(true)
            .includeSignals(true)
            .minPatternStrength(50)
            .lookbackPeriod(120)
            .build();
    }

    // å¿«é€Ÿè¨ˆåŠƒï¼šåªåµæ¸¬ K ç·šå‹æ…‹
    public static PatternDetectionPlan quick() {
        return PatternDetectionPlan.builder()
            .includeKLinePatterns(true)
            .includeChartPatterns(false)
            .includeTrendPatterns(false)
            .includeSupportResistance(false)
            .includeSignals(false)
            .minPatternStrength(60)
            .lookbackPeriod(30)
            .build();
    }

    // æƒæè¨ˆåŠƒï¼šå…¨å¸‚å ´æƒæç”¨
    public static PatternDetectionPlan scan() {
        return PatternDetectionPlan.builder()
            .includeKLinePatterns(true)
            .includeChartPatterns(false)
            .includeTrendPatterns(false)
            .includeSupportResistance(false)
            .includeSignals(true)
            .minPatternStrength(70)
            .lookbackPeriod(30)
            .build();
    }
}
```

---

## 2. æ ¸å¿ƒæ¥­å‹™æµç¨‹

### 2.1 å‹æ…‹åµæ¸¬ä¸»æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‹æ…‹åµæ¸¬ä¸»æµç¨‹                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   1. æ¥æ”¶åµæ¸¬è«‹æ±‚    â”‚ â† PatternDetectionRequest (stockId, plan)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   2. è³‡æ–™æº–å‚™        â”‚â”€â”€â”€â”€â†’â”‚ å¾ M06 å–å¾—åŸå§‹è³‡æ–™              â”‚
â”‚                     â”‚     â”‚ - daily_prices (OHLCV)          â”‚
â”‚                     â”‚     â”‚ å¾ M07 å–å¾—æŠ€è¡“æŒ‡æ¨™              â”‚
â”‚                     â”‚     â”‚ - MA, ADX, DI+/DI-              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   3. å»ºç«‹åƒ¹æ ¼åºåˆ—    â”‚ â† PriceDataSeries (å°è£ OHLCV)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   4. åŸ·è¡Œåµæ¸¬å¼•æ“    â”‚â”€â”€â”€â”€â†’â”‚ DefaultPatternEngine.detect()   â”‚
â”‚                     â”‚     â”‚ - éæ­·è¨»å†Šçš„åµæ¸¬å™¨               â”‚
â”‚                     â”‚     â”‚ - ä¾è¨ˆåŠƒç¯©é¸è¦åŸ·è¡Œçš„åµæ¸¬å™¨        â”‚
â”‚                     â”‚     â”‚ - æ”¶é›†åµæ¸¬çµæœèˆ‡è¨ºæ–·è³‡è¨Š          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4.1 K ç·šå‹æ…‹åµæ¸¬   â”‚ â† KLinePatternDetector
â”‚   - å–®æ ¹ K ç·šå‹æ…‹   â”‚     HammerDetector, DojiDetector...
â”‚   - é›™æ ¹ K ç·šå‹æ…‹   â”‚     EngulfingDetector, HaramiDetector...
â”‚   - ä¸‰æ ¹ K ç·šå‹æ…‹   â”‚     MorningStarDetector...
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4.2 åœ–è¡¨å‹æ…‹åµæ¸¬   â”‚ â† ChartPatternDetector
â”‚   - æ³¢å³°æ³¢è°·è­˜åˆ¥    â”‚     PeakTroughIdentifier
â”‚   - è¶¨å‹¢ç·šå»ºæ§‹      â”‚     TrendLineBuilder
â”‚   - å‹æ…‹æ¯”å°        â”‚     PatternMatcher
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4.3 è¶¨å‹¢å‹æ…‹åˆ†æ   â”‚ â† TrendPatternDetector
â”‚   - è¶¨å‹¢æ–¹å‘åˆ¤å®š    â”‚     TrendDirectionDetector
â”‚   - å‡ç·šåˆ†æ        â”‚     MAAlignmentAnalyzer
â”‚   - çµæ§‹åˆ†æ        â”‚     PriceStructureAnalyzer
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4.4 æ”¯æ’å£“åŠ›è­˜åˆ¥   â”‚ â† SupportResistanceDetector
â”‚   - æ³¢å³°æ³¢è°·        â”‚     PeakTroughDetector
â”‚   - æˆäº¤é‡åˆ†å¸ƒ      â”‚     VolumeProfileAnalyzer
â”‚   - å‡ç·šä½ç½®        â”‚     MALevelDetector
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4.5 è¨Šè™Ÿç”¢ç”Ÿ       â”‚ â† SignalGenerator
â”‚   - K ç·šè¨Šè™Ÿ        â”‚     KLineSignalGenerator
â”‚   - åœ–è¡¨è¨Šè™Ÿ        â”‚     ChartSignalGenerator
â”‚   - è¶¨å‹¢è¨Šè™Ÿ        â”‚     TrendSignalGenerator
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   5. å½™æ•´åµæ¸¬çµæœ   â”‚ â† PatternDetectionResult
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   6. å„²å­˜çµæœ        â”‚â”€â”€â”€â”€â†’â”‚ kline_pattern_results (INSERT)  â”‚
â”‚                     â”‚     â”‚ chart_pattern_results (UPSERT)  â”‚
â”‚                     â”‚     â”‚ trend_analysis_results (UPSERT) â”‚
â”‚                     â”‚     â”‚ support_resistance_levels       â”‚
â”‚                     â”‚     â”‚ pattern_signals (INSERT)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   7. æ›´æ–°å¿«å–        â”‚ â† Redis Cache
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   8. å›å‚³çµæœ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.2 K ç·šå‹æ…‹åµæ¸¬æ¼”ç®—æ³•

#### 2.2.1 éŒ˜å­ç·šåµæ¸¬

```
æ¼”ç®—æ³•ï¼šéŒ˜å­ç·šï¼ˆHammerï¼‰åµæ¸¬

è¼¸å…¥ï¼š
  - candle: K ç·šè³‡æ–™ (open, high, low, close)
  - trend_context: è¶¨å‹¢èƒŒæ™¯ï¼ˆå¾å‰ N æ—¥åˆ¤æ–·ï¼‰

è¼¸å‡ºï¼š
  - is_pattern: æ˜¯å¦ç‚ºéŒ˜å­ç·š
  - strength: å‹æ…‹å¼·åº¦ (0-100)

æ¼”ç®—æ³•ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. è¨ˆç®— K ç·šçµ„æˆ                                            â”‚
â”‚    body = abs(close - open)                                â”‚
â”‚    upper_shadow = high - max(open, close)                  â”‚
â”‚    lower_shadow = min(open, close) - low                   â”‚
â”‚    total_range = high - low                                â”‚
â”‚                                                            â”‚
â”‚ 2. åŸºæœ¬æ¢ä»¶æª¢æŸ¥                                             â”‚
â”‚    cond1 = lower_shadow >= body * 2        // ä¸‹å½±ç·šå¤ é•·    â”‚
â”‚    cond2 = upper_shadow <= body * 0.3      // ä¸Šå½±ç·šå¾ˆçŸ­    â”‚
â”‚    cond3 = body > total_range * 0.1        // æœ‰å¯¦é«”       â”‚
â”‚    cond4 = trend_context == DOWNTREND      // åœ¨ä¸‹è·Œè¶¨å‹¢ä¸­  â”‚
â”‚                                                            â”‚
â”‚ 3. åˆ¤æ–·æ˜¯å¦ç‚ºéŒ˜å­ç·š                                          â”‚
â”‚    is_pattern = cond1 && cond2 && cond3 && cond4           â”‚
â”‚                                                            â”‚
â”‚ 4. è¨ˆç®—å¼·åº¦                                                 â”‚
â”‚    if is_pattern:                                          â”‚
â”‚        shadow_ratio = lower_shadow / body                  â”‚
â”‚        strength = min(100, 50 + shadow_ratio * 10)         â”‚
â”‚        if close > open:  // é™½ç·šåŠ åˆ†                        â”‚
â”‚            strength += 10                                  â”‚
â”‚        if volume_ratio > 1.5:  // æˆäº¤é‡æ”¾å¤§åŠ åˆ†            â”‚
â”‚            strength += 10                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2.2 åå™¬å‹æ…‹åµæ¸¬

```
æ¼”ç®—æ³•ï¼šçœ‹æ¼²åå™¬ï¼ˆBullish Engulfingï¼‰åµæ¸¬

è¼¸å…¥ï¼š
  - prev_candle: å‰ä¸€æ ¹ K ç·š
  - curr_candle: ç•¶å‰ K ç·š
  - trend_context: è¶¨å‹¢èƒŒæ™¯

è¼¸å‡ºï¼š
  - is_pattern: æ˜¯å¦ç‚ºçœ‹æ¼²åå™¬
  - strength: å‹æ…‹å¼·åº¦ (0-100)

æ¼”ç®—æ³•ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. è¨ˆç®—å¯¦é«”                                                 â”‚
â”‚    prev_body = abs(prev_candle.close - prev_candle.open)   â”‚
â”‚    curr_body = abs(curr_candle.close - curr_candle.open)   â”‚
â”‚                                                            â”‚
â”‚ 2. åˆ¤æ–·é¡è‰²                                                 â”‚
â”‚    prev_is_bearish = prev_candle.close < prev_candle.open  â”‚
â”‚    curr_is_bullish = curr_candle.close > curr_candle.open  â”‚
â”‚                                                            â”‚
â”‚ 3. åå™¬æ¢ä»¶æª¢æŸ¥                                             â”‚
â”‚    cond1 = prev_is_bearish                 // å‰ä¸€æ ¹é™°ç·š    â”‚
â”‚    cond2 = curr_is_bullish                 // ç•¶å‰é™½ç·š      â”‚
â”‚    cond3 = curr_candle.open < prev_candle.close   // é–‹ä½   â”‚
â”‚    cond4 = curr_candle.close > prev_candle.open   // æ”¶é«˜   â”‚
â”‚    cond5 = curr_body > prev_body           // å¯¦é«”åå™¬      â”‚
â”‚    cond6 = trend_context == DOWNTREND      // åœ¨ä¸‹è·Œè¶¨å‹¢ä¸­  â”‚
â”‚                                                            â”‚
â”‚ 4. åˆ¤æ–·æ˜¯å¦ç‚ºçœ‹æ¼²åå™¬                                        â”‚
â”‚    is_pattern = cond1 && cond2 && cond3 && cond4 &&        â”‚
â”‚                 cond5 && cond6                              â”‚
â”‚                                                            â”‚
â”‚ 5. è¨ˆç®—å¼·åº¦                                                 â”‚
â”‚    if is_pattern:                                          â”‚
â”‚        engulf_ratio = curr_body / prev_body                â”‚
â”‚        strength = min(100, 50 + engulf_ratio * 15)         â”‚
â”‚        if volume_ratio > 1.5:                              â”‚
â”‚            strength += 15                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.3 åœ–è¡¨å‹æ…‹åµæ¸¬æ¼”ç®—æ³•

#### 2.3.1 æ³¢å³°æ³¢è°·è­˜åˆ¥

```
æ¼”ç®—æ³•ï¼šæ³¢å³°æ³¢è°·è­˜åˆ¥ï¼ˆPeak & Trough Identificationï¼‰

è¼¸å…¥ï¼š
  - prices[]: åƒ¹æ ¼åºåˆ— (OHLC)
  - lookback: å·¦å³æ¯”è¼ƒç¯„åœï¼ˆé è¨­ 5ï¼‰

è¼¸å‡ºï¼š
  - peaks[]: æ³¢å³°é™£åˆ— (date, price)
  - troughs[]: æ³¢è°·é™£åˆ— (date, price)

æ¼”ç®—æ³•ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. éæ­·åƒ¹æ ¼åºåˆ—ï¼ˆæ’é™¤é‚Šç•Œï¼‰                                   â”‚
â”‚    for i = lookback to len(prices) - lookback - 1:         â”‚
â”‚                                                            â”‚
â”‚ 2. æª¢æŸ¥æ˜¯å¦ç‚ºæ³¢å³°                                           â”‚
â”‚    is_peak = true                                          â”‚
â”‚    for j = 1 to lookback:                                  â”‚
â”‚        if prices[i].high <= prices[i-j].high OR            â”‚
â”‚           prices[i].high <= prices[i+j].high:              â”‚
â”‚            is_peak = false                                 â”‚
â”‚            break                                           â”‚
â”‚                                                            â”‚
â”‚ 3. æª¢æŸ¥æ˜¯å¦ç‚ºæ³¢è°·                                           â”‚
â”‚    is_trough = true                                        â”‚
â”‚    for j = 1 to lookback:                                  â”‚
â”‚        if prices[i].low >= prices[i-j].low OR              â”‚
â”‚           prices[i].low >= prices[i+j].low:                â”‚
â”‚            is_trough = false                               â”‚
â”‚            break                                           â”‚
â”‚                                                            â”‚
â”‚ 4. è¨˜éŒ„æ³¢å³°æ³¢è°·                                             â”‚
â”‚    if is_peak:                                             â”‚
â”‚        peaks.add((prices[i].date, prices[i].high))         â”‚
â”‚    if is_trough:                                           â”‚
â”‚        troughs.add((prices[i].date, prices[i].low))        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3.2 é›™é‡é ‚åµæ¸¬

```
æ¼”ç®—æ³•ï¼šé›™é‡é ‚ï¼ˆDouble Topï¼‰åµæ¸¬

è¼¸å…¥ï¼š
  - peaks[]: æ³¢å³°é™£åˆ—
  - troughs[]: æ³¢è°·é™£åˆ—
  - current_price: ç•¶å‰åƒ¹æ ¼
  - tolerance: åƒ¹æ ¼å®¹å·®ï¼ˆé è¨­ 3%ï¼‰

è¼¸å‡ºï¼š
  - is_pattern: æ˜¯å¦ç‚ºé›™é‡é ‚
  - pattern_data: å‹æ…‹è©³ç´°è³‡æ–™

æ¼”ç®—æ³•ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ‰¾å‡ºæœ€è¿‘çš„å…©å€‹æ³¢å³°                                        â”‚
â”‚    recent_peaks = peaks[-2:]  // å–æœ€è¿‘å…©å€‹                 â”‚
â”‚    if len(recent_peaks) < 2:                               â”‚
â”‚        return (false, null)                                â”‚
â”‚                                                            â”‚
â”‚ 2. æª¢æŸ¥å…©å€‹æ³¢å³°æ˜¯å¦ç›¸è¿‘                                      â”‚
â”‚    peak1, peak2 = recent_peaks[0], recent_peaks[1]         â”‚
â”‚    price_diff = abs(peak1.price - peak2.price)             â”‚
â”‚    avg_price = (peak1.price + peak2.price) / 2             â”‚
â”‚    cond1 = price_diff / avg_price <= tolerance             â”‚
â”‚                                                            â”‚
â”‚ 3. æ‰¾å‡ºå…©å³°ä¹‹é–“çš„æ³¢è°·ï¼ˆé ¸ç·šï¼‰                                 â”‚
â”‚    neckline_trough = find_trough_between(peak1, peak2)     â”‚
â”‚    if neckline_trough is null:                             â”‚
â”‚        return (false, null)                                â”‚
â”‚    neckline = neckline_trough.price                        â”‚
â”‚                                                            â”‚
â”‚ 4. æª¢æŸ¥å‹æ…‹æ¯”ä¾‹                                             â”‚
â”‚    pattern_height = avg_price - neckline                   â”‚
â”‚    cond2 = pattern_height > avg_price * 0.05  // é«˜åº¦å¤     â”‚
â”‚                                                            â”‚
â”‚ 5. æª¢æŸ¥æ™‚é–“é–“éš”                                             â”‚
â”‚    days_between = peak2.date - peak1.date                  â”‚
â”‚    cond3 = days_between >= 10 AND days_between <= 90       â”‚
â”‚                                                            â”‚
â”‚ 6. åˆ¤æ–·å‹æ…‹ç‹€æ…‹                                             â”‚
â”‚    is_pattern = cond1 && cond2 && cond3                    â”‚
â”‚    if is_pattern:                                          â”‚
â”‚        if current_price < neckline:                        â”‚
â”‚            status = CONFIRMED                              â”‚
â”‚            target = neckline - pattern_height              â”‚
â”‚        else:                                               â”‚
â”‚            status = FORMING                                â”‚
â”‚            target = neckline - pattern_height              â”‚
â”‚                                                            â”‚
â”‚ 7. è¨ˆç®—å¼·åº¦                                                 â”‚
â”‚    strength = 50                                           â”‚
â”‚    strength += (1 - price_diff/avg_price) * 20  // å°ç¨±æ€§  â”‚
â”‚    strength += time_symmetry_score * 15         // æ™‚é–“å°ç¨± â”‚
â”‚    strength += volume_pattern_score * 15        // é‡èƒ½é…åˆ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.4 è¶¨å‹¢åˆ†ææ¼”ç®—æ³•

```
æ¼”ç®—æ³•ï¼šè¶¨å‹¢æ–¹å‘èˆ‡å¼·åº¦åˆ¤å®š

è¼¸å…¥ï¼š
  - prices[]: åƒ¹æ ¼åºåˆ—
  - peaks[]: æ³¢å³°é™£åˆ—
  - troughs[]: æ³¢è°·é™£åˆ—
  - ma_values: å‡ç·šæ•¸å€¼ (MA5, MA10, MA20, MA60)
  - adx_value: ADX å€¼

è¼¸å‡ºï¼š
  - trend_direction: è¶¨å‹¢æ–¹å‘
  - trend_strength: è¶¨å‹¢å¼·åº¦ (0-100)

æ¼”ç®—æ³•ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åˆ†æé«˜ä½é»çµæ§‹                                           â”‚
â”‚    higher_highs = 0                                        â”‚
â”‚    higher_lows = 0                                         â”‚
â”‚    lower_highs = 0                                         â”‚
â”‚    lower_lows = 0                                          â”‚
â”‚                                                            â”‚
â”‚    for i = 1 to len(peaks) - 1:                            â”‚
â”‚        if peaks[i].price > peaks[i-1].price:               â”‚
â”‚            higher_highs++                                  â”‚
â”‚        else:                                               â”‚
â”‚            lower_highs++                                   â”‚
â”‚                                                            â”‚
â”‚    for i = 1 to len(troughs) - 1:                          â”‚
â”‚        if troughs[i].price > troughs[i-1].price:           â”‚
â”‚            higher_lows++                                   â”‚
â”‚        else:                                               â”‚
â”‚            lower_lows++                                    â”‚
â”‚                                                            â”‚
â”‚ 2. åˆ¤æ–·è¶¨å‹¢æ–¹å‘                                             â”‚
â”‚    if higher_highs > 0 AND higher_lows > 0 AND             â”‚
â”‚       lower_highs == 0 AND lower_lows == 0:                â”‚
â”‚        trend_direction = UPTREND                           â”‚
â”‚    else if lower_highs > 0 AND lower_lows > 0 AND          â”‚
â”‚            higher_highs == 0 AND higher_lows == 0:         â”‚
â”‚        trend_direction = DOWNTREND                         â”‚
â”‚    else:                                                   â”‚
â”‚        trend_direction = SIDEWAYS                          â”‚
â”‚                                                            â”‚
â”‚ 3. åˆ†æå‡ç·šæ’åˆ—                                             â”‚
â”‚    if MA5 > MA10 > MA20 > MA60:                            â”‚
â”‚        ma_alignment = BULLISH (score = 30)                 â”‚
â”‚    else if MA5 < MA10 < MA20 < MA60:                       â”‚
â”‚        ma_alignment = BEARISH (score = 30)                 â”‚
â”‚    else:                                                   â”‚
â”‚        ma_alignment = MIXED (score = 10)                   â”‚
â”‚                                                            â”‚
â”‚ 4. ADX å¼·åº¦è©•ä¼°                                             â”‚
â”‚    if adx_value > 40:                                      â”‚
â”‚        adx_score = 30  // å¼·è¶¨å‹¢                           â”‚
â”‚    else if adx_value > 25:                                 â”‚
â”‚        adx_score = 20  // ä¸­ç­‰è¶¨å‹¢                          â”‚
â”‚    else if adx_value > 15:                                 â”‚
â”‚        adx_score = 10  // å¼±è¶¨å‹¢                            â”‚
â”‚    else:                                                   â”‚
â”‚        adx_score = 0   // ç„¡æ˜ç¢ºè¶¨å‹¢                        â”‚
â”‚                                                            â”‚
â”‚ 5. è¨ˆç®—ç¶œåˆå¼·åº¦                                             â”‚
â”‚    structure_score = (higher_highs + higher_lows) * 10     â”‚
â”‚                      OR (lower_highs + lower_lows) * 10    â”‚
â”‚    trend_strength = ma_score + adx_score + structure_score â”‚
â”‚    trend_strength = min(100, trend_strength)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. æ‰¹æ¬¡åµæ¸¬æµç¨‹

### 3.1 æ¯æ—¥æ‰¹æ¬¡å‹æ…‹åµæ¸¬ Job

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            JOB-M10-001: æ¯æ—¥å‹æ…‹åµæ¸¬æ‰¹æ¬¡è¨ˆç®—                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Job å•Ÿå‹•æª¢æŸ¥    â”‚
â”‚  - ç¢ºèªæ˜¯äº¤æ˜“æ—¥      â”‚
â”‚  - ç¢ºèª M06 åŒæ­¥å®Œæˆ â”‚
â”‚  - ç¢ºèª M07 è¨ˆç®—å®Œæˆ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. å–å¾—è‚¡ç¥¨æ¸…å–®     â”‚â”€â”€â”€â”€â†’â”‚ SELECT stock_id FROM stocks      â”‚
â”‚                     â”‚     â”‚ WHERE is_active = true           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. åˆ†æ‰¹è™•ç†         â”‚ â† batch_size = 50
â”‚                     â”‚
â”‚  for each batch:    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚    â”‚ 3.1 è¼‰å…¥è³‡æ–™   â”‚â”‚ â† è¼‰å…¥ 120 æ—¥åƒ¹æ ¼è³‡æ–™
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”‚         â”‚
â”‚           â–¼         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚    â”‚ 3.2 åµæ¸¬å¼•æ“   â”‚â”‚ â† PatternEngine.batchDetect()
â”‚    â”‚  - Kç·šå‹æ…‹     â”‚â”‚
â”‚    â”‚  - åœ–è¡¨å‹æ…‹    â”‚â”‚
â”‚    â”‚  - è¶¨å‹¢åˆ†æ    â”‚â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”‚         â”‚
â”‚           â–¼         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚    â”‚ 3.3 å„²å­˜çµæœ   â”‚â”‚ â† MyBatis æ‰¹æ¬¡ INSERT/UPSERT
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. ç”¢ç”Ÿè¨Šè™Ÿçµ±è¨ˆ     â”‚ â† çµ±è¨ˆç•¶æ—¥å„é¡å‹æ…‹å‡ºç¾æ¬¡æ•¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. æ›´æ–°å¿«å–         â”‚ â† Redis å¿«å–æ›´æ–°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. è¨˜éŒ„ Job çµæœ    â”‚
â”‚  - æˆåŠŸ/å¤±æ•—çµ±è¨ˆ     â”‚
â”‚  - åŸ·è¡Œæ™‚é–“          â”‚
â”‚  - åµæ¸¬å‹æ…‹æ•¸é‡      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.2 å…¨å¸‚å ´æƒææµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            JOB-M10-002: å…¨å¸‚å ´ K ç·šå‹æ…‹æƒæ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ä½¿ç”¨æƒæè¨ˆåŠƒ     â”‚ â† PatternDetectionPlan.scan()
â”‚  - åªæƒæ K ç·šå‹æ…‹   â”‚
â”‚  - é«˜å¼·åº¦é–€æª» (70+)  â”‚
â”‚  - ç”¢ç”Ÿè¨Šè™Ÿ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ä¸¦è¡Œè™•ç†         â”‚ â† å¤šç·šç¨‹æ‰¹æ¬¡è™•ç†
â”‚  - åˆ† 10 æ‰¹ä¸¦è¡Œ      â”‚
â”‚  - æ¯æ‰¹ 180 æª”       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. å½™æ•´æƒæçµæœ     â”‚
â”‚                     â”‚
â”‚  - çœ‹æ¼²å‹æ…‹æ¸…å–®      â”‚
â”‚  - çœ‹è·Œå‹æ…‹æ¸…å–®      â”‚
â”‚  - ä¾å¼·åº¦æ’åº        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. å„²å­˜è‡³å¿«å–       â”‚ â† pattern_scan_results
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. API æŸ¥è©¢æµç¨‹

### 4.1 å‹æ…‹åˆ†ææŸ¥è©¢æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            GET /api/v1/pattern/{stockId}/analysis                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. åƒæ•¸é©—è­‰         â”‚
â”‚  - stockId æ ¼å¼      â”‚
â”‚  - lookback_days ç¯„åœâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. æŸ¥è©¢ Redis å¿«å–  â”‚â”€â”€â”€â”€â†’â”‚ GET pattern:analysis:{stockId}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€ å¿«å–å‘½ä¸­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                â”‚
        â–¼                                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. æŸ¥è©¢è³‡æ–™åº«       â”‚                     â”‚  ç›´æ¥å›å‚³å¿«å–çµæœ     â”‚
â”‚  - kline_pattern_   â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    results          â”‚
â”‚  - chart_pattern_   â”‚
â”‚    results          â”‚
â”‚  - trend_analysis_  â”‚
â”‚    results          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€ è³‡æ–™åº«æœ‰çµæœ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                   â”‚
        â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. å³æ™‚åµæ¸¬         â”‚          â”‚  çµ„è£å›æ‡‰ DTO        â”‚
â”‚  ï¼ˆè³‡æ–™åº«ç„¡çµæœæ™‚ï¼‰   â”‚          â”‚  æ›´æ–° Redis å¿«å–     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                   â”‚
        â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. å„²å­˜åµæ¸¬çµæœ     â”‚          â”‚  å›å‚³ API å›æ‡‰       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. å¿«å–ç­–ç•¥

### 5.1 å¿«å–å±¤ç´š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å¿«å–æ¶æ§‹                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         è«‹æ±‚
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   L1: Redis å¿«å–    â”‚ â† TTL: 6 å°æ™‚
â”‚   - å‹æ…‹åˆ†æçµæœ     â”‚
â”‚   - æƒæçµæœå¿«å–     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ æœªå‘½ä¸­
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   L2: DB çµæœè¡¨     â”‚ â† æ¯æ—¥è¨ˆç®—çµæœ
â”‚   - kline_pattern_  â”‚
â”‚     results         â”‚
â”‚   - chart_pattern_  â”‚
â”‚     results         â”‚
â”‚   - trend_analysis_ â”‚
â”‚     results         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ æœªå‘½ä¸­
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å³æ™‚åµæ¸¬          â”‚ â† PatternEngine.detect()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å¿«å– Key è¨­è¨ˆ

| å¿«å–é¡å‹ | Key Pattern | TTL | èªªæ˜ |
|---------|-------------|-----|------|
| å®Œæ•´å‹æ…‹åˆ†æ | `pattern:analysis:{stockId}:{date}` | 6 å°æ™‚ | å®Œæ•´åˆ†æçµæœ |
| K ç·šå‹æ…‹ | `pattern:kline:{stockId}:{date}` | 6 å°æ™‚ | K ç·šå‹æ…‹çµæœ |
| åœ–è¡¨å‹æ…‹ | `pattern:chart:{stockId}:{date}` | 6 å°æ™‚ | åœ–è¡¨å‹æ…‹çµæœ |
| è¶¨å‹¢åˆ†æ | `pattern:trend:{stockId}:{date}` | 6 å°æ™‚ | è¶¨å‹¢åˆ†æçµæœ |
| æ”¯æ’å£“åŠ› | `pattern:sr:{stockId}:{date}` | 24 å°æ™‚ | æ”¯æ’å£“åŠ›ä½ |
| K ç·šæƒæçµæœ | `pattern:scan:kline:{date}` | 30 åˆ†é˜ | å…¨å¸‚å ´æƒæ |
| åœ–è¡¨æƒæçµæœ | `pattern:scan:chart:{date}` | 1 å°æ™‚ | å…¨å¸‚å ´æƒæ |

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [M10 åŠŸèƒ½éœ€æ±‚](../specs/functional/M10-æŠ€è¡“å‹æ…‹è¾¨è­˜åŠŸèƒ½éœ€æ±‚.md)
- [M10 APIè¦æ ¼](../specs/api/M10-APIè¦æ ¼.md)
- [M10 è³‡æ–™åº«è¨­è¨ˆ](./M10-è³‡æ–™åº«è¨­è¨ˆ.md)
- [M10 Jobæ’ç¨‹é…ç½®](../deployment/M10-Jobæ’ç¨‹é…ç½®.md)

---

**æ–‡ä»¶ç¶­è­·è€…**: ç³»çµ±åˆ†æå¸«
**æœ€å¾Œæ›´æ–°**: 2026-01-12
**ä¸‹æ¬¡å¯©æ ¸**: 2026-03-31
