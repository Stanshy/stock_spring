# M15-è­¦å ±é€šçŸ¥ç³»çµ± æ¥­å‹™æµç¨‹

> **æ–‡ä»¶ç·¨è™Ÿ**: FLOW-M15
> **æ¨¡çµ„åç¨±**: è­¦å ±é€šçŸ¥ç³»çµ± (Alert Notification System)
> **ç‰ˆæœ¬**: v1.0
> **æœ€å¾Œæ›´æ–°**: 2026-01-15
> **ç‹€æ…‹**: Draft

---

## 1. æµç¨‹ç¸½è¦½

### 1.1 æ ¸å¿ƒæ¥­å‹™æµç¨‹

| # | æµç¨‹åç¨± | è§¸ç™¼æ–¹å¼ | èªªæ˜ |
|---|---------|---------|------|
| 1 | ä¿¡è™Ÿç›£æ§ | æ’ç¨‹/äº‹ä»¶ | ç›£æ§ M13 æ–°ä¿¡è™Ÿ |
| 2 | è­¦å ±è§¸ç™¼åˆ¤æ–· | è‡ªå‹• | æ¯”å°è¦å‰‡è§¸ç™¼è­¦å ± |
| 3 | é€šçŸ¥æ´¾ç™¼ | è‡ªå‹• | ç™¼é€é€šçŸ¥è‡³å„ç®¡é“ |
| 4 | è¦å‰‡ç®¡ç† | API å‘¼å« | ç”¨æˆ¶ç®¡ç†è­¦å ±è¦å‰‡ |
| 5 | é€šçŸ¥è¨­å®š | API å‘¼å« | ç”¨æˆ¶è¨­å®šé€šçŸ¥åå¥½ |
| 6 | æ­·å²æ¸…ç† | æ’ç¨‹ | æ¸…ç†éæœŸè¨˜éŒ„ |

### 1.2 æµç¨‹å„ªå…ˆç´š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      M15 æ¥­å‹™æµç¨‹å„ªå…ˆç´š                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   å³æ™‚è™•ç†ï¼ˆæ¯«ç§’ç´šï¼‰                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  â€¢ ä¿¡è™Ÿç›£æ§ â†’ è­¦å ±è§¸ç™¼åˆ¤æ–·                           â”‚      â”‚
â”‚   â”‚  â€¢ HIGH å„ªå…ˆç´šé€šçŸ¥ç™¼é€                               â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚   éåŒæ­¥è™•ç†ï¼ˆç§’ç´šï¼‰                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  â€¢ NORMAL å„ªå…ˆç´šé€šçŸ¥ç™¼é€                             â”‚      â”‚
â”‚   â”‚  â€¢ è­¦å ±æ­·å²è¨˜éŒ„                                      â”‚      â”‚
â”‚   â”‚  â€¢ é€šçŸ¥æ—¥èªŒè¨˜éŒ„                                      â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚   æ‰¹æ¬¡è™•ç†ï¼ˆåˆ†é˜ç´šï¼‰                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  â€¢ LOW å„ªå…ˆç´šæ‰¹æ¬¡é€šçŸ¥                                â”‚      â”‚
â”‚   â”‚  â€¢ é‡è©¦å¤±æ•—é€šçŸ¥                                      â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚   èƒŒæ™¯è™•ç†ï¼ˆæ’ç¨‹ä»»å‹™ï¼‰                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  â€¢ æ­·å²è¨˜éŒ„æ¸…ç†                                      â”‚      â”‚
â”‚   â”‚  â€¢ æ¯æ—¥è¨ˆæ•¸é‡ç½®                                      â”‚      â”‚
â”‚   â”‚  â€¢ éæ´»èºè£ç½®æ¸…ç†                                    â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ä¿¡è™Ÿç›£æ§æµç¨‹

### 2.1 æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ä¿¡è™Ÿç›£æ§æµç¨‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ç›£æ§æ¨¡å¼é¸æ“‡                                â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚   äº‹ä»¶é©…å‹•æ¨¡å¼   â”‚         â”‚   è¼ªè©¢æ¨¡å¼       â”‚             â”‚   â”‚
â”‚  â”‚  â”‚  M13 å®Œæˆäº‹ä»¶   â”‚         â”‚  æ¯åˆ†é˜æŸ¥è©¢     â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚           â”‚                           â”‚                       â”‚   â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚  â”‚                       â”‚                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                           â”‚
â”‚                          â–¼                                           â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚                   â”‚  Query New  â”‚                                    â”‚
â”‚                   â”‚  Signals    â”‚ â—„â”€â”€ æŸ¥è©¢ M13 unified_signals      â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                          â”‚                                           â”‚
â”‚                          â”‚ æ–°ä¿¡è™Ÿåˆ—è¡¨                                â”‚
â”‚                          â–¼                                           â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚                   â”‚   Filter    â”‚                                    â”‚
â”‚                   â”‚  Valid      â”‚ â—„â”€â”€ éæ¿¾æœ‰æ•ˆè©•ç´š (A+, A, B+, B)   â”‚
â”‚                   â”‚  Signals    â”‚                                    â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                          â”‚                                           â”‚
â”‚                          â”‚ æœ‰æ•ˆä¿¡è™Ÿ                                  â”‚
â”‚                          â–¼                                           â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚                   â”‚  Dispatch   â”‚                                    â”‚
â”‚                   â”‚  to Alert   â”‚ â—„â”€â”€ ç™¼é€è‡³è­¦å ±è§¸ç™¼æµç¨‹             â”‚
â”‚                   â”‚  Trigger    â”‚                                    â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ç›£æ§æŸ¥è©¢

```java
@Service
@Slf4j
public class SignalMonitorService {

    @Autowired
    private UnifiedSignalRepository signalRepository;

    @Autowired
    private AlertTriggerService alertTriggerService;

    private OffsetDateTime lastCheckTime;

    /**
     * æŸ¥è©¢æ–°ä¿¡è™Ÿä¸¦è§¸ç™¼è­¦å ±åˆ¤æ–·
     */
    @Scheduled(fixedRate = 60000)  // æ¯åˆ†é˜
    public void monitorNewSignals() {
        OffsetDateTime now = OffsetDateTime.now();
        OffsetDateTime since = lastCheckTime != null ? lastCheckTime : now.minusMinutes(1);

        List<UnifiedSignal> newSignals = signalRepository.findNewSignals(
            since,
            List.of("A+", "A", "B+", "B")  // æœ‰æ•ˆè©•ç´š
        );

        if (!newSignals.isEmpty()) {
            log.info("ç™¼ç¾ {} å‰‡æ–°ä¿¡è™Ÿ", newSignals.size());
            alertTriggerService.processSignals(newSignals);
        }

        lastCheckTime = now;
    }

    /**
     * M13 å®Œæˆäº‹ä»¶è™•ç†ï¼ˆäº‹ä»¶é©…å‹•æ¨¡å¼ï¼‰
     */
    @EventListener
    public void onSignalEngineCompleted(SignalEngineCompletedEvent event) {
        log.info("M13 ä¿¡è™Ÿå¼•æ“å®Œæˆï¼Œé–‹å§‹è™•ç†è­¦å ±");
        monitorNewSignals();
    }
}
```

---

## 3. è­¦å ±è§¸ç™¼åˆ¤æ–·æµç¨‹

### 3.1 æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è­¦å ±è§¸ç™¼åˆ¤æ–·æµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚   Signal     â”‚                                                   â”‚
â”‚  â”‚   Input      â”‚ â—„â”€â”€ æ–°ä¿¡è™Ÿè¼¸å…¥                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚  Load All    â”‚                                                   â”‚
â”‚  â”‚  Enabled     â”‚ â—„â”€â”€ è¼‰å…¥æ‰€æœ‰å•Ÿç”¨è¦å‰‡                              â”‚
â”‚  â”‚  Rules       â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”‚  foreach rule                                              â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    è¦å‰‡æ¯”å°æµç¨‹                                â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚  Stock ID  â”‚â”€â”€â–ºâ”‚  Direction â”‚â”€â”€â–ºâ”‚   Grade    â”‚            â”‚   â”‚
â”‚  â”‚  â”‚  Match?    â”‚   â”‚  Match?    â”‚   â”‚  Match?    â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚         â”‚                â”‚                â”‚                   â”‚   â”‚
â”‚  â”‚         â”‚ Yes            â”‚ Yes            â”‚ Yes               â”‚   â”‚
â”‚  â”‚         â–¼                â–¼                â–¼                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚   Score    â”‚â”€â”€â–ºâ”‚  Custom    â”‚â”€â”€â–ºâ”‚   All      â”‚            â”‚   â”‚
â”‚  â”‚  â”‚  Match?    â”‚   â”‚ Conditions â”‚   â”‚  Matched   â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚         â”‚                â”‚                â”‚                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚ Yes            â”‚ Yes            â”‚                       â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                             â”‚                                        â”‚
â”‚                             â–¼                                        â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                  â”‚  Throttle Check  â”‚                                â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                           â”‚                                          â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚         â–¼                 â”‚                 â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Check Dailyâ”‚           â”‚          â”‚  Check     â”‚                 â”‚
â”‚  â”‚   Limit    â”‚           â”‚          â”‚  Cooldown  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                 â”‚                 â”‚                       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                           â”‚ é€šéç¯€æµæª¢æŸ¥                             â”‚
â”‚                           â–¼                                         â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                  â”‚  Create Alert    â”‚                                â”‚
â”‚                  â”‚  Record          â”‚ â—„â”€â”€ å»ºç«‹è­¦å ±è¨˜éŒ„               â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                           â”‚                                          â”‚
â”‚                           â–¼                                          â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                  â”‚  Dispatch to     â”‚                                â”‚
â”‚                  â”‚  Notification    â”‚ â—„â”€â”€ ç™¼é€è‡³é€šçŸ¥æ´¾ç™¼             â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 è¦å‰‡æ¯”å°é‚è¼¯

```java
@Service
@Slf4j
public class AlertTriggerService {

    @Autowired
    private AlertRuleRepository ruleRepository;

    @Autowired
    private AlertHistoryRepository historyRepository;

    @Autowired
    private NotificationDispatcher notificationDispatcher;

    /**
     * è™•ç†ä¿¡è™Ÿåˆ—è¡¨
     */
    @Async
    public void processSignals(List<UnifiedSignal> signals) {
        List<AlertRule> enabledRules = ruleRepository.findAllEnabledRules();

        for (UnifiedSignal signal : signals) {
            for (AlertRule rule : enabledRules) {
                if (isRuleMatched(rule, signal)) {
                    triggerAlert(rule, signal);
                }
            }
        }
    }

    /**
     * è¦å‰‡æ¯”å°
     */
    private boolean isRuleMatched(AlertRule rule, UnifiedSignal signal) {
        RuleConditions conditions = rule.getConditions();

        // è‚¡ç¥¨ ID æ¯”å°
        if (conditions.getStockIds() != null && !conditions.getStockIds().isEmpty()) {
            if (!conditions.getStockIds().contains(signal.getStockId())) {
                return false;
            }
        }

        // æ–¹å‘æ¯”å°
        if (conditions.getDirections() != null && !conditions.getDirections().isEmpty()) {
            if (!conditions.getDirections().contains(signal.getUnifiedDirection())) {
                return false;
            }
        }

        // è©•ç´šæ¯”å°
        if (conditions.getMinGrade() != null) {
            if (!isGradeMatch(signal.getGrade(), conditions.getMinGrade())) {
                return false;
            }
        }

        // è©•åˆ†æ¯”å°
        if (conditions.getMinScore() != null) {
            if (signal.getUnifiedScore().compareTo(conditions.getMinScore()) < 0) {
                return false;
            }
        }

        return true;
    }

    /**
     * è©•ç´šæ¯”å°
     */
    private boolean isGradeMatch(String signalGrade, String minGrade) {
        List<String> gradeOrder = List.of("A+", "A", "B+", "B", "C", "D");
        int signalIndex = gradeOrder.indexOf(signalGrade);
        int minIndex = gradeOrder.indexOf(minGrade);
        return signalIndex >= 0 && signalIndex <= minIndex;
    }

    /**
     * è§¸ç™¼è­¦å ±
     */
    private void triggerAlert(AlertRule rule, UnifiedSignal signal) {
        // ç¯€æµæª¢æŸ¥
        if (!passThrottleCheck(rule, signal)) {
            log.debug("è­¦å ±è¢«ç¯€æµ: rule={}, stock={}", rule.getRuleId(), signal.getStockId());
            return;
        }

        // å»ºç«‹è­¦å ±è¨˜éŒ„
        AlertHistory alert = createAlertHistory(rule, signal);
        historyRepository.save(alert);

        // æ›´æ–°è¦å‰‡çµ±è¨ˆ
        ruleRepository.incrementTriggeredCount(rule.getRuleId(), OffsetDateTime.now());

        // æ´¾ç™¼é€šçŸ¥
        notificationDispatcher.dispatch(alert, rule);
    }
}
```

---

## 4. é€šçŸ¥æ´¾ç™¼æµç¨‹

### 4.1 æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          é€šçŸ¥æ´¾ç™¼æµç¨‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚   Alert      â”‚                                                   â”‚
â”‚  â”‚   Input      â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚  Load User   â”‚                                                   â”‚
â”‚  â”‚  Settings    â”‚ â—„â”€â”€ è¼‰å…¥ç”¨æˆ¶é€šçŸ¥è¨­å®š                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     å‰ç½®æª¢æŸ¥                                   â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚  Mute Check  â”‚  â”‚  Daily Limit â”‚  â”‚   Channel    â”‚        â”‚   â”‚
â”‚  â”‚  â”‚  éœéŸ³æ™‚æ®µ?    â”‚  â”‚  Check       â”‚  â”‚   Enabled?   â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â”‚         â”‚                 â”‚                 â”‚                 â”‚   â”‚
â”‚  â”‚         â”‚ ä¸åœ¨éœéŸ³         â”‚ æœªé”ä¸Šé™        â”‚ å·²å•Ÿç”¨          â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â”‚                           â”‚                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚ é€šéæª¢æŸ¥                              â”‚
â”‚                              â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ‰¹æ¬¡åˆä½µåˆ¤æ–·                                â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  batch_enabled?  â”€â”€â”€â–º Yes â”€â”€â”€â–º åŠ å…¥æ‰¹æ¬¡ä½‡åˆ—                   â”‚   â”‚
â”‚  â”‚        â”‚                                                      â”‚   â”‚
â”‚  â”‚        â”‚ No                                                   â”‚   â”‚
â”‚  â”‚        â–¼                                                      â”‚   â”‚
â”‚  â”‚  ç«‹å³ç™¼é€                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚                                    â”‚
â”‚                                 â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ç®¡é“è·¯ç”±                                    â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  channels = [EMAIL, LINE, PUSH]                               â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚         â–¼            â–¼            â–¼            â–¼              â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚  â”‚    â”‚ Email  â”‚   â”‚  Line  â”‚   â”‚  Push  â”‚   â”‚Webhook â”‚         â”‚   â”‚
â”‚  â”‚    â”‚ Sender â”‚   â”‚ Sender â”‚   â”‚ Sender â”‚   â”‚ Sender â”‚         â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜         â”‚   â”‚
â”‚  â”‚         â”‚            â”‚            â”‚            â”‚              â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚                      â”‚            â”‚                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚            â”‚                               â”‚
â”‚                         â–¼            â–¼                               â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                  â”‚   Log       â”‚  â”‚   Update    â”‚                    â”‚
â”‚                  â”‚  Results    â”‚  â”‚   Counts    â”‚                    â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 é€šçŸ¥ç™¼é€å™¨å¯¦ä½œ

```java
@Service
@Slf4j
public class NotificationDispatcher {

    @Autowired
    private UserNotificationSettingsRepository settingsRepository;

    @Autowired
    private NotificationLogRepository logRepository;

    @Autowired
    private DailyNotificationCountRepository countRepository;

    @Autowired
    private Map<NotificationChannel, NotificationSender> senders;

    @Autowired
    private NotificationTemplateService templateService;

    /**
     * æ´¾ç™¼é€šçŸ¥
     */
    public void dispatch(AlertHistory alert, AlertRule rule) {
        String userId = rule.getUserId();
        UserNotificationSettings settings = settingsRepository.findByUserId(userId)
            .orElse(new UserNotificationSettings());

        // å‰ç½®æª¢æŸ¥
        if (shouldMute(settings)) {
            log.debug("ç”¨æˆ¶è™•æ–¼éœéŸ³ç‹€æ…‹: {}", userId);
            return;
        }

        // è™•ç†å„ç®¡é“
        for (String channelStr : rule.getNotificationChannels()) {
            NotificationChannel channel = NotificationChannel.valueOf(channelStr);

            if (!isChannelEnabled(settings, channel)) {
                continue;
            }

            if (hasExceededDailyLimit(userId, channel, settings)) {
                logSkipped(alert, channel, "DAILY_LIMIT_EXCEEDED");
                continue;
            }

            // ç™¼é€é€šçŸ¥
            sendNotification(alert, channel, settings);
        }
    }

    /**
     * ç™¼é€å–®ä¸€é€šçŸ¥
     */
    private void sendNotification(AlertHistory alert, NotificationChannel channel,
                                   UserNotificationSettings settings) {
        NotificationLog log = new NotificationLog();
        log.setLogId(generateLogId());
        log.setAlertId(alert.getAlertId());
        log.setUserId(settings.getUserId());
        log.setChannel(channel);
        log.setStatus(NotificationStatus.PENDING);

        try {
            // æ¸²æŸ“è¨Šæ¯
            String message = templateService.render(alert, channel);
            log.setMessagePreview(truncate(message, 500));

            // ç™¼é€
            NotificationSender sender = senders.get(channel);
            sender.send(alert, settings, message);

            // æˆåŠŸ
            log.setStatus(NotificationStatus.SENT);
            log.setSentAt(OffsetDateTime.now());

            // æ›´æ–°æ¯æ—¥è¨ˆæ•¸
            incrementDailyCount(settings.getUserId(), channel);

        } catch (Exception e) {
            log.setStatus(NotificationStatus.FAILED);
            log.setErrorMessage(e.getMessage());
            log.error("é€šçŸ¥ç™¼é€å¤±æ•—: channel={}, alert={}", channel, alert.getAlertId(), e);
        }

        logRepository.save(log);
    }

    /**
     * éœéŸ³æª¢æŸ¥
     */
    private boolean shouldMute(UserNotificationSettings settings) {
        if (!settings.getMuteEnabled()) {
            return false;
        }

        ZoneId timezone = ZoneId.of(settings.getQuietTimezone());
        LocalTime now = LocalTime.now(timezone);

        // å‹¿æ“¾æ™‚æ®µ
        if (settings.getQuietHoursStart() != null && settings.getQuietHoursEnd() != null) {
            if (isInQuietHours(now, settings.getQuietHoursStart(), settings.getQuietHoursEnd())) {
                return true;
            }
        }

        // é€±æœ«éœéŸ³
        if (settings.getWeekendMute()) {
            DayOfWeek day = LocalDate.now(timezone).getDayOfWeek();
            if (day == DayOfWeek.SATURDAY || day == DayOfWeek.SUNDAY) {
                return true;
            }
        }

        return false;
    }
}
```

---

## 5. æ‰¹æ¬¡é€šçŸ¥æµç¨‹

### 5.1 æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          æ‰¹æ¬¡é€šçŸ¥æµç¨‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     æ‰¹æ¬¡ä½‡åˆ—                                   â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  User A: [Alert1, Alert2, Alert3]                             â”‚   â”‚
â”‚  â”‚  User B: [Alert4]                                             â”‚   â”‚
â”‚  â”‚  User C: [Alert5, Alert6]                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                     â”‚
â”‚                                â”‚ æ¯ 5 åˆ†é˜æª¢æŸ¥                       â”‚
â”‚                                â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ‰¹æ¬¡è™•ç†åˆ¤æ–·                                â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  foreach user:                                                â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚   â”‚
â”‚  â”‚    â”‚ alerts.size  â”‚                                          â”‚   â”‚
â”‚  â”‚    â”‚     >= 3?    â”‚ â—„â”€â”€ threshold                            â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚   â”‚
â”‚  â”‚           â”‚                                                   â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                            â”‚   â”‚
â”‚  â”‚     â–¼           â–¼                                            â”‚   â”‚
â”‚  â”‚    Yes          No                                            â”‚   â”‚
â”‚  â”‚     â”‚           â”‚                                             â”‚   â”‚
â”‚  â”‚     â–¼           â–¼                                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚   â”‚
â”‚  â”‚  â”‚ ç™¼é€   â”‚  â”‚ é€ä¸€   â”‚                                      â”‚   â”‚
â”‚  â”‚  â”‚ æ‘˜è¦   â”‚  â”‚ ç™¼é€   â”‚                                      â”‚   â”‚
â”‚  â”‚  â”‚ é€šçŸ¥   â”‚  â”‚        â”‚                                      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  æ‰¹æ¬¡æ‘˜è¦æ ¼å¼ç¯„ä¾‹:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“Š æ‚¨æœ‰ 5 å‰‡æ–°è­¦å ±                                           â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  1. 2330 å°ç©é›» - è²·å…¥ (A)                                    â”‚   â”‚
â”‚  â”‚  2. 2317 é´»æµ· - è²·å…¥ (B+)                                     â”‚   â”‚
â”‚  â”‚  3. 2454 è¯ç™¼ç§‘ - è³£å‡º (B)                                    â”‚   â”‚
â”‚  â”‚  4. 2382 å»£é” - è²·å…¥ (B+)                                     â”‚   â”‚
â”‚  â”‚  5. 2308 å°é”é›» - è²·å…¥ (A)                                    â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â° 2026-01-15 14:35:00                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. é€šçŸ¥é‡è©¦æµç¨‹

### 6.1 æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          é€šçŸ¥é‡è©¦æµç¨‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚  Send Fail   â”‚                                                   â”‚
â”‚  â”‚  status=     â”‚                                                   â”‚
â”‚  â”‚  FAILED      â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚ retry_count  â”‚                                                   â”‚
â”‚  â”‚    < 3 ?     â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                                      â”‚
â”‚    â–¼         â–¼                                                      â”‚
â”‚   Yes        No                                                     â”‚
â”‚    â”‚         â”‚                                                      â”‚
â”‚    â”‚         â–¼                                                      â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚    â”‚  â”‚  Mark as     â”‚                                              â”‚
â”‚    â”‚  â”‚  PERMANENT   â”‚                                              â”‚
â”‚    â”‚  â”‚  FAILURE     â”‚                                              â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚    â”‚                                                                 â”‚
â”‚    â–¼                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚   Schedule   â”‚                                                   â”‚
â”‚  â”‚   Retry      â”‚ â—„â”€â”€ æŒ‡æ•¸é€€é¿: 1min, 5min, 15min                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”‚  å»¶é²å¾Œ                                                    â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚    Retry     â”‚                                                   â”‚
â”‚  â”‚    Send      â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                                      â”‚
â”‚    â–¼         â–¼                                                      â”‚
â”‚  æˆåŠŸ        å¤±æ•—                                                    â”‚
â”‚    â”‚         â”‚                                                      â”‚
â”‚    â–¼         â–¼                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚ â”‚SENT  â”‚  â”‚retry++   â”‚                                              â”‚
â”‚ â”‚      â”‚  â”‚å›åˆ°åˆ¤æ–·  â”‚                                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 é‡è©¦ç­–ç•¥

| é‡è©¦æ¬¡æ•¸ | å»¶é²æ™‚é–“ | èªªæ˜ |
|---------|---------|------|
| ç¬¬ 1 æ¬¡ | 1 åˆ†é˜ | å¿«é€Ÿé‡è©¦ |
| ç¬¬ 2 æ¬¡ | 5 åˆ†é˜ | ä¸­ç­‰å»¶é² |
| ç¬¬ 3 æ¬¡ | 15 åˆ†é˜ | æœ€å¾Œå˜—è©¦ |
| æ”¾æ£„ | - | æ¨™è¨˜æ°¸ä¹…å¤±æ•— |

---

## 7. ç•°å¸¸è™•ç†æµç¨‹

### 7.1 ç•°å¸¸é¡å‹èˆ‡è™•ç†

| ç•°å¸¸é¡å‹ | åŸå›  | è™•ç†æ–¹å¼ |
|---------|------|---------|
| InvalidRuleException | è¦å‰‡æ ¼å¼éŒ¯èª¤ | è¿”å› 400ï¼Œæç¤ºéŒ¯èª¤æ¬„ä½ |
| RuleLimitExceededException | è¶…éè¦å‰‡ä¸Šé™ | è¿”å› 400ï¼Œæç¤ºé™åˆ¶ |
| ChannelNotConfiguredException | é€šçŸ¥ç®¡é“æœªè¨­å®š | è·³éè©²ç®¡é“ï¼Œè¨˜éŒ„æ—¥èªŒ |
| SendFailedException | ç™¼é€å¤±æ•— | é€²å…¥é‡è©¦æµç¨‹ |
| DailyLimitExceededException | è¶…éæ¯æ—¥é™é¡ | è·³éç™¼é€ï¼Œè¨˜éŒ„ SKIPPED |
| LineTokenExpiredException | Line Token éæœŸ | é€šçŸ¥ç”¨æˆ¶é‡æ–°ç¶å®š |

---

## 8. æµç¨‹ç›£æ§æŒ‡æ¨™

| æŒ‡æ¨™åç¨± | èªªæ˜ | å‘Šè­¦é–¾å€¼ |
|---------|------|---------|
| alert_triggered_count | æ¯å°æ™‚è§¸ç™¼è­¦å ±æ•¸ | > 10000 |
| notification_sent_count | æ¯å°æ™‚ç™¼é€é€šçŸ¥æ•¸ | > 20000 |
| notification_failed_rate | é€šçŸ¥å¤±æ•—ç‡ | > 5% |
| notification_latency_ms | é€šçŸ¥å»¶é² | P99 > 30s |
| batch_queue_size | æ‰¹æ¬¡ä½‡åˆ—å¤§å° | > 1000 |

---

## 9. ç›¸é—œæ–‡æª”

- [M15 åŠŸèƒ½éœ€æ±‚](../specs/functional/M15-è­¦å ±é€šçŸ¥ç³»çµ±åŠŸèƒ½éœ€æ±‚.md)
- [M15 API è¦æ ¼](../specs/api/M15-APIè¦æ ¼.md)
- [M15 è³‡æ–™åº«è¨­è¨ˆ](./M15-è³‡æ–™åº«è¨­è¨ˆ.md)
- [M15 Job æ’ç¨‹é…ç½®](../deployment/M15-Jobæ’ç¨‹é…ç½®.md)

---

**æ–‡ä»¶ç¶­è­·è€…**: å¾Œç«¯å·¥ç¨‹å¸«
**æœ€å¾Œæ›´æ–°**: 2026-01-15
**ä¸‹æ¬¡å¯©æ ¸**: 2026-04-15
